
Ext.ns('helpiq');helpiq.i18 = {};helpiq.i18.data = {};helpiq.i18.basic= {};helpiq.i18.messages= {};helpiq.i18.nav= {};helpiq.i18.search= {};helpiq.i18.topic= {};helpiq.i18.userbar= {};helpiq.i18.companyform= {};helpiq.i18.companylist= {};helpiq.i18.sysadmin= {};helpiq.i18.login= {};helpiq.i18.tab= {};helpiq.i18.topicform= {};helpiq.i18.basic.cancel = 'Cancel';helpiq.i18.basic.close = 'Close';helpiq.i18.basic.continue_anyway = 'Continue Anyway';helpiq.i18.basic.created = 'Created';helpiq.i18.basic.download_file = 'Download File';helpiq.i18.basic.download_mask = 'Please wait. This could take several minutes.';helpiq.i18.basic.download_pdf = 'Download PDF';helpiq.i18.basic.initializing = 'Initializing...';helpiq.i18.basic.last_modified = 'Last modified';helpiq.i18.basic.loading = 'Loading...';helpiq.i18.basic.master = 'master';helpiq.i18.basic.no = 'No';helpiq.i18.basic.refresh = 'Refresh';helpiq.i18.basic.remove = 'Delete';helpiq.i18.basic.save = 'Save';helpiq.i18.basic.search = 'Search';helpiq.i18.basic.test = 'Test';helpiq.i18.basic.try_again = 'Try Again';helpiq.i18.basic.update = 'Update';helpiq.i18.basic.updating = 'Updating...';helpiq.i18.basic.yes = 'Yes';helpiq.i18.messages.confirm_title = 'Confirm';helpiq.i18.messages.error_title = 'Error';helpiq.i18.messages.info_title = 'Information';helpiq.i18.messages.no_topics = 'No topics to display';helpiq.i18.messages.pdf_failed = 'Sorry we are unable to generate a PDF at this time';helpiq.i18.messages.session_out = 'Your session has expired, please login again';helpiq.i18.messages.warn_title = 'Warning';helpiq.i18.nav.collapse_all = 'Collapse All';helpiq.i18.nav.expand_all = 'Expand All';helpiq.i18.nav.filter = 'Filter';helpiq.i18.nav.index = 'Index';helpiq.i18.nav.table_content = 'Table of Contents';helpiq.i18.search.empty_text = 'Sorry your search did not return any results';helpiq.i18.topic.cannot_found_text = 'The page you are looking for might have been removed, had its name changed, or is temporarily unavailable.<br/>Please make sure you spelled the page name correctly or use the search box.';helpiq.i18.topic.cannot_found_title = 'The page cannot be found';helpiq.i18.topic.helpful_send = 'Send';helpiq.i18.topic.links_permalink = 'Permalink';helpiq.i18.topic.links_static = 'Static Content';helpiq.i18.topic.links_text = 'Copy and paste one of the following links:';helpiq.i18.topic.links_title = 'Page Links';helpiq.i18.topic.links_url = 'URL';helpiq.i18.topic.not_found_title = 'Page not found';helpiq.i18.topic.open_new_tab = 'Open Link';helpiq.i18.topic.open_new_win = 'Open Link in New Browser Tab';helpiq.i18.topic.poweredby = 'Knowledge base powered by';helpiq.i18.topic.timeout_text = 'The page has timed out, please click refresh below or try again:';helpiq.i18.topic.timeout_title = 'The page has timed out';helpiq.i18.userbar.basic_view = 'Basic View';helpiq.i18.userbar.close_all_tabs = 'Close All Tabs';helpiq.i18.userbar.login = 'Log in';helpiq.i18.userbar.logout = 'Log out';helpiq.i18.userbar.page_links = 'Page Links';helpiq.i18.userbar.page_tools = 'Print';helpiq.i18.userbar.print_page = 'Print Page';helpiq.i18.userbar.save_all_pdf = 'Save all Pages as PDF';helpiq.i18.userbar.save_pdf = 'Save Page as PDF';helpiq.i18.userbar.switch_projects = 'Sites';helpiq.i18.userbar.tab_view = 'Tab View';helpiq.i18.userbar.view = 'View';(function(){var b=navigator.userAgent.toLowerCase(),a=function(c){return c.test(b)};Ext.apply(Ext,{isiPad:Ext.isSafari&&a(/ipad/),isiPod:Ext.isSafari&&a(/ipod/),isiPhone:Ext.isSafari&&a(/iphone/),isAndroid:a(/android/),isMobileSafari:Ext.isSafari&&(a(/ipad/)||a(/ipod/)||a(/iphone/)),isMobile:Ext.isSafari&&(a(/ipad/)||a(/ipod/)||a(/iphone/))||a(/android/),isNewIE:!a(/opera/)&&(a(/msie/)||a(/trident/))});Ext.apply(Ext,{useHTML5:Ext.isMobileSafari})})();Ext.WindowMgr.zseed=12000;Ext.ns("helpiq","helpiq.ui","helpiq.util");Ext.applyIf(String.prototype,{replaceAll:function(e,d){var f=this;if(Ext.isArray(e)){for(var c=0,a=e.length;c<a;c++){f=f.replaceAll(e[c],d[c])}}else{if(Ext.isObject(e)){for(c in e){f=f.replaceAll(c,e[c])}}else{var b=new RegExp(e,"gi");return this.replace(b,d)}}return f},trim:function(){return this.trimRight().trimLeft()},endsWith:function(b){if(this.length==0||this.length<b.length){return false}return(this.substr(this.length-b.length)==b)},startsWith:function(b){if(this.length==0||this.length<b.length){return false}return(this.substr(0,b.length)==b)},left:function(b){if(b<=0){return""}else{if(b>this.length){return this}else{return this.substring(0,b)}}},right:function(b){if(b<=0){return""}else{if(b>this.length){return this}else{return this.substring(this.length,this.length-b)}}}});(function(){var b=Ext.tree.TreeNode,c=Ext.tree.AsyncTreeNode,a=Ext.form.Field;Ext.override(b,{expand:b.prototype.expand.createInterceptor(function(d,f,g,e){if(!this.getOwnerTree()){this.expanded=true}})});Ext.override(c,{expand:c.prototype.expand.createInterceptor(function(d,f,g,e){if(!this.getOwnerTree()||!this.ui){this.loaded=true}}),loadComplete:c.prototype.loadComplete.createInterceptor(function(d,f,g,e){if(!this.ui){this.ui={afterLoad:Ext.emptyFn}}})});Ext.override(a,{onRender:a.prototype.onRender.createSequence(function(e,d){if(!this.isFormField){var f=this.el.wrap({tag:"form",onsubmit:"return false;"});this.el.insertSibling({tag:"label","for":this.el.id,style:"display:none",html:"search"});if(!this.cellWrap){this.cellWrap=f;this.getPositionEl=function(){return this.cellWrap}}}if(this.five08Label){this.el.insertSibling({tag:"label","for":this.el.id,style:"display:none",html:"search"})}}),onDestroy:a.prototype.onDestroy.createInterceptor(function(){if(this.cellWrap){Ext.destroy(this.cellWrap)}})})})();Ext.apply(Ext.form.VTypes,{password:function(a){return a.match(/\d+/g)},repeatpassword:function(c,b){if(b.initialPassField){var a=Ext.getCmp(b.initialPassField);return(c==a.getValue())}return true},passwordText:"Passwords must be at least 6 characters and contain at least 1 number",repeatpasswordText:"Your Passwords do not match"});Ext.ux.History=function(){var e={};var c={};var d=this;e.Adapter={bind:function(h,i,k){Ext.EventManager.on(h,i,k);var j=c[h.id]=c[h.id]||{};j[i]=j[i]||[];j[i].push(k)},trigger:function(n,l,p){if(l=="statechange"){Ext.ux.History.fireEvent("statechange",e.getState());return}var q=c[n.id],k=[p||{}],j,m,h;if(q&&(j=q[l])){for(m=0,h=j.length;m<h;m++){j[m].apply(n,k)}}},extractEventData:function(h,i){return(i&&i.browserEvent&&i.browserEvent[h])||undefined},onDomLoad:function(h){Ext.onReady(h)}};e.initHtml4=function(){e.enabled=true;e.discardedStates={};e.discardState=function(l,h,k){var i=e.getHashByState(l),j;j={discardedState:l,backState:k,forwardState:h};e.discardedStates[i]=j;return true};e.discardedState=function(h){var j=e.getHashByState(h),i;i=e.discardedStates[j]||false;return i};e.recycleState=function(h){var i=e.getHashByState(h);if(e.discardedState(h)){delete e.discardedStates[i]}return true};if(e.emulated.pushState){e.pushState=function(l,o,j,h){if(e.getHashByUrl(j)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(h!==false&&e.busy()){e.pushQueue({scope:e,callback:e.pushState,args:arguments,queue:h});return false}e.busy(true);var n=e.createStateObject(l,o,j),k=e.getHashByState(n),i=e.getState(false),m=e.getHashByState(i);e.storeState(n);e.expectedStateId=n.id;e.recycleState(n);e.setTitle(n);if(k===m){e.busy(false);return false}e.saveState(n);e.Adapter.trigger(window,"statechange");e.busy(false);return true};e.replaceState=function(l,n,k,h){if(e.getHashByUrl(k)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(h!==false&&e.busy()){e.pushQueue({scope:e,callback:e.replaceState,args:arguments,queue:h});return false}e.busy(true);var m=e.createStateObject(l,n,k),j=e.getState(false),i=e.getStateByIndex(-2);e.discardState(j,m,i);e.pushState(m.data,m.title,m.url,false);return true}}};var a=window.console||undefined,b=window.sessionStorage||false,g=Ext.util.JSON,f=window.history;g.stringify=g.encode;g.parse=g.decode;e.init=function(){if(e.initialized){return false}e.initCore();e.initialized=true;return true};e.initCore=function(){e.options=e.options||{};e.options.hashChangeInterval=e.options.hashChangeInterval||100;e.options.safariPollInterval=e.options.safariPollInterval||500;e.options.doubleCheckInterval=e.options.doubleCheckInterval||500;e.options.storeInterval=e.options.storeInterval||1000;e.options.busyDelay=e.options.busyDelay||250;e.options.debug=e.options.debug||false;e.options.initialTitle=e.options.initialTitle||document.title;e.intervalList=[];e.clearAllIntervals=function(){var k,j=e.intervalList;if(typeof j!=="undefined"&&j!==null){for(k=0;k<j.length;k++){clearInterval(j[k])}e.intervalList=null}};e.debug=function(){if((e.options.debug||false)){e.log.apply(e,arguments)}};e.log=function(){var q=!(typeof a==="undefined"||typeof a.log==="undefined"||typeof a.log.apply==="undefined"),k=document.getElementById("log"),p,o,r,l,j;if(q){l=Array.prototype.slice.call(arguments);p=l.shift();if(typeof a.debug!=="undefined"){a.debug.apply(a,[p,l])}else{a.log.apply(a,[p,l])}}else{p=("\n"+arguments[0]+"\n")}for(o=1,r=arguments.length;o<r;++o){j=arguments[o];if(typeof j==="object"&&typeof g!=="undefined"){try{j=g.stringify(j)}catch(m){}}p+="\n"+j+"\n"}if(k){k.value+=p+"\n-----\n";k.scrollTop=k.scrollHeight-k.clientHeight}else{if(!q){alert(p)}}return true};e.getInternetExplorerMajorVersion=function(){var j=e.getInternetExplorerMajorVersion.cached=(typeof e.getInternetExplorerMajorVersion.cached!=="undefined")?e.getInternetExplorerMajorVersion.cached:(function(){var k=3,m=document.createElement("div"),l=m.getElementsByTagName("i");while((m.innerHTML="<!--[if gt IE "+(++k)+"]><i></i><![endif]-->")&&l[0]){}return(k>4)?k:false})();return j};e.isInternetExplorer=function(){var j=e.isInternetExplorer.cached=(typeof e.isInternetExplorer.cached!=="undefined")?e.isInternetExplorer.cached:Boolean(e.getInternetExplorerMajorVersion());return j};e.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent))),hashChange:Boolean(!(("onhashchange" in window)||("onhashchange" in document))||(e.isInternetExplorer()&&e.getInternetExplorerMajorVersion()<10))};e.enabled=!e.emulated.pushState;e.bugs={setHash:Boolean(!e.emulated.pushState&&navigator.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),safariPoll:Boolean(!e.emulated.pushState&&navigator.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),ieDoubleCheck:Boolean(e.isInternetExplorer()&&e.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(e.isInternetExplorer()&&e.getInternetExplorerMajorVersion()<7)};e.isEmptyObject=function(k){for(var j in k){return false}return true};e.cloneObject=function(l){var k,j;if(l){k=g.stringify(l);j=g.parse(k)}else{j={}}return j};e.getRootUrl=function(){var j=document.location.protocol+"//"+(document.location.hostname||document.location.host);if(document.location.port||false){j+=":"+document.location.port}j+="/";return j};e.getBaseHref=function(){var j=document.getElementsByTagName("base"),l=null,k="";if(j.length===1){l=j[0];k=l.href.replace(/[^\/]+$/,"")}k=k.replace(/\/+$/,"");if(k){k+="/"}return k};e.getBaseUrl=function(){var j=e.getRootUrl();return j};e.getPageUrl=function(){var j=e.getState(false,false),l=(j||{}).url||document.location.href,k;k=l.replace(/\/+$/,"").replace(/[^\/]+$/,function(o,n,m){return(/\./).test(o)?o:o+"/"});return k};e.getBasePageUrl=function(){var j=e.getRootUrl();return j};e.getFullUrl=function(k,m){var j=k,l=k.substring(0,1);m=(typeof m==="undefined")?true:m;if(/[a-z]+\:\/\//.test(k)){}else{if(l==="/"){j=e.getRootUrl()+k.replace(/^\/+/,"")}else{if(l==="#"){j=e.getPageUrl().replace(/#.*/,"")+k}else{if(l==="?"){j=e.getPageUrl().replace(/[\?#].*/,"")+k}else{if(m){j=e.getBaseUrl()+k.replace(/^(\.\/)+/,"")}else{j=e.getBasePageUrl()+k.replace(/^(\.\/)+/,"")}}}}}return j.replace(/\#$/,"")};e.getShortUrl=function(l){var k=l,m=e.getBaseUrl(),j=e.getRootUrl();if(e.emulated.pushState){k=k.replace(m,"")}k=k.replace(j,"/");if(e.isTraditionalAnchor(k)){}k=k.replace(/\#$/,"");return k};e.store={};e.idToState=e.idToState||{};e.stateToId=e.stateToId||{};e.urlToId=e.urlToId||{};e.storedStates=e.storedStates||[];e.savedStates=e.savedStates||[];e.normalizeStore=function(){e.store.idToState=e.store.idToState||{};e.store.urlToId=e.store.urlToId||{};e.store.stateToId=e.store.stateToId||{}};e.getState=function(l,k){if(typeof l==="undefined"){l=true}if(typeof k==="undefined"){k=true}var j=e.getLastSavedState();if(!j&&k){j=e.createStateObject()}if(l){j=e.cloneObject(j);j.url=j.cleanUrl||j.url}return j};e.getIdByState=function(j){var l=e.extractId(j.url),k;if(!l){k=e.getStateString(j);if(typeof e.stateToId[k]!=="undefined"){l=e.stateToId[k]}else{if(typeof e.store.stateToId[k]!=="undefined"){l=e.store.stateToId[k]}else{while(true){l=(new Date()).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof e.idToState[l]==="undefined"&&typeof e.store.idToState[l]==="undefined"){break}}e.stateToId[k]=l;e.idToState[l]=j}}}return l};e.normalizeState=function(k){var l,j;if(!k||(typeof k!=="object")){k={}}if(typeof k.normalized!=="undefined"){return k}if(!k.data||(typeof k.data!=="object")){k.data={}}l={};l.normalized=true;l.title=k.title||"";l.url=e.getFullUrl(e.unescapeString(k.url||document.location.href));l.hash=e.getShortUrl(l.url);l.data=e.cloneObject(k.data);l.id=e.getIdByState(l);l.cleanUrl=l.url.replace(/\??\&_suid.*/,"");l.url=l.cleanUrl;j=!e.isEmptyObject(l.data);if(l.title||j){l.hash=e.getShortUrl(l.url).replace(/\??\&_suid.*/,"");if(!/\?/.test(l.hash)){}}l.hashedUrl=e.getFullUrl(l.hash);if((e.emulated.pushState||e.bugs.safariPoll)&&e.hasUrlDuplicate(l)){l.url=l.hashedUrl}return l};e.createStateObject=function(l,m,k){var j={data:l,title:m,url:k};j=e.normalizeState(j);return j};e.getStateById=function(k){k=String(k);var j=e.idToState[k]||e.store.idToState[k]||undefined;return j};e.getStateString=function(k){var j,l,m;j=e.normalizeState(k);l={data:j.data,title:k.title,url:k.url};m=g.stringify(l);return m};e.getStateId=function(k){var j,l;j=e.normalizeState(k);l=j.id;return l};e.getHashByState=function(k){var j,l;j=e.normalizeState(k);l=j.hash;return l};e.extractId=function(l){var m,k,j;k=/(.*)\&_suid=([0-9]+)$/.exec(l);j=k?(k[1]||l):l;m=k?String(k[2]||""):"";return m||false};e.isTraditionalAnchor=function(k){var j=!(/[\/\?\.]/.test(k));return j};e.extractState=function(m,l){var j=null,n,k;l=l||false;n=e.extractId(m);if(n){j=e.getStateById(n)}if(!j){k=e.getFullUrl(m);n=e.getIdByUrl(k)||false;if(n){j=e.getStateById(n)}if(!j&&l&&!e.isTraditionalAnchor(m)){j=e.createStateObject(null,null,k)}}return j};e.getIdByUrl=function(j){var k=e.urlToId[j]||e.store.urlToId[j]||undefined;return k};e.getLastSavedState=function(){return e.savedStates[e.savedStates.length-1]||undefined};e.getLastStoredState=function(){return e.storedStates[e.storedStates.length-1]||undefined};e.hasUrlDuplicate=function(l){var k=false,j;j=e.extractState(l.url);k=j&&j.id!==l.id;return k};e.storeState=function(j){e.urlToId[j.url]=j.id;e.storedStates.push(e.cloneObject(j));return j};e.isLastSavedState=function(m){var l=false,k,j,n;if(e.savedStates.length){k=m.id;j=e.getLastSavedState();n=j.id;l=(k===n)}return l};e.saveState=function(j){if(e.isLastSavedState(j)){return false}e.savedStates.push(e.cloneObject(j));return true};e.getStateByIndex=function(k){var j=null;if(typeof k==="undefined"){j=e.savedStates[e.savedStates.length-1]}else{if(k<0){j=e.savedStates[e.savedStates.length+k]}else{j=e.savedStates[k]}}return j};e.unescapeString=function(l){var j=l,k;while(true){k=window.unescape(j);if(k===j){break}j=k}return j};e.setTitle=function(l){var m=l.title,k;if(!m){k=e.getStateByIndex(0);if(k&&k.url===l.url){m=k.title||e.options.initialTitle}}try{document.getElementsByTagName("title")[0].innerHTML=m.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(j){}document.title=m;return e};e.queues=[];e.busy=function(k){if(typeof k!=="undefined"){e.busy.flag=k}else{if(typeof e.busy.flag==="undefined"){e.busy.flag=false}}if(!e.busy.flag){clearTimeout(e.busy.timeout);var j=function(){var m,l,n;if(e.busy.flag){return}for(m=e.queues.length-1;m>=0;--m){l=e.queues[m];if(l.length===0){continue}n=l.shift();e.fireQueueItem(n);e.busy.timeout=setTimeout(j,e.options.busyDelay)}};e.busy.timeout=setTimeout(j,e.options.busyDelay)}return e.busy.flag};e.busy.flag=false;e.fireQueueItem=function(j){return j.callback.apply(j.scope||e,j.args||[])};e.pushQueue=function(j){e.queues[j.queue||0]=e.queues[j.queue||0]||[];e.queues[j.queue||0].push(j);return e};e.queue=function(k,j){if(typeof k==="function"){k={callback:k}}if(typeof j!=="undefined"){k.queue=j}if(e.busy()){e.pushQueue(k)}else{e.fireQueueItem(k)}return e};e.clearQueue=function(){e.busy.flag=false;e.queues=[];return e};e.stateChanged=false;e.doubleChecker=false;e.doubleCheckComplete=function(){e.stateChanged=true;e.doubleCheckClear();return e};e.doubleCheckClear=function(){if(e.doubleChecker){clearTimeout(e.doubleChecker);e.doubleChecker=false}return e};e.doubleCheck=function(j){e.stateChanged=false;e.doubleCheckClear();if(e.bugs.ieDoubleCheck){e.doubleChecker=setTimeout(function(){e.doubleCheckClear();if(!e.stateChanged){j()}return true},e.options.doubleCheckInterval)}return e};e.safariStatePoll=function(){var k=e.extractState(document.location.href),j;if(!e.isLastSavedState(k)){j=k}else{return}if(!j){j=e.createStateObject()}e.Adapter.trigger(window,"popstate");return e};e.back=function(j){if(j!==false&&e.busy()){e.pushQueue({scope:e,callback:e.back,args:arguments,queue:j});return false}e.busy(true);e.doubleCheck(function(){e.back(false)});f.go(-1);return true};e.forward=function(j){if(j!==false&&e.busy()){e.pushQueue({scope:e,callback:e.forward,args:arguments,queue:j});return false}e.busy(true);e.doubleCheck(function(){e.forward(false)});f.go(1);return true};e.go=function(k,j){var l;if(k>0){for(l=1;l<=k;++l){e.forward(j)}}else{if(k<0){for(l=-1;l>=k;--l){e.back(j)}}else{throw new Error("History.go: History.go requires a positive or negative integer passed.")}}return e};if(e.emulated.pushState){var i=function(){};e.pushState=e.pushState||i;e.replaceState=e.replaceState||i}else{e.onPopState=function(m,j){var o=false,n=false,l,k;e.doubleCheckComplete();o=e.Adapter.extractEventData("state",m,j)||false;if(o){n=e.getStateById(o)}else{if(e.expectedStateId){n=e.getStateById(e.expectedStateId)}else{n=e.extractState(document.location.href)}}if(!n){n=e.createStateObject(null,null,document.location.href)}e.expectedStateId=false;if(e.isLastSavedState(n)){e.busy(false);return false}e.storeState(n);e.saveState(n);e.setTitle(n);e.Adapter.trigger(window,"statechange");e.busy(false);return true};e.Adapter.bind(window,"popstate",e.onPopState);e.pushState=function(l,n,k,j){if(j!==false&&e.busy()){e.pushQueue({scope:e,callback:e.pushState,args:arguments,queue:j});return false}e.busy(true);var m=e.createStateObject(l,n,k);if(e.isLastSavedState(m)){e.busy(false)}else{e.storeState(m);e.expectedStateId=m.id;f.pushState(m.id,m.title,m.url);e.Adapter.trigger(window,"popstate")}return true};e.replaceState=function(l,n,k,j){if(e.getHashByUrl(k)&&e.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(j!==false&&e.busy()){e.pushQueue({scope:e,callback:e.replaceState,args:arguments,queue:j});return false}e.busy(true);var m=e.createStateObject(l,n,k);if(e.isLastSavedState(m)){e.busy(false)}else{e.storeState(m);e.expectedStateId=m.id;f.replaceState(m.id,m.title,m.url);e.Adapter.trigger(window,"popstate")}return true}}if(b){try{e.store=g.parse(b.getItem("History.store"))||{}}catch(h){e.store={}}e.normalizeStore()}else{e.store={};e.normalizeStore()}e.Adapter.bind(window,"beforeunload",e.clearAllIntervals);e.Adapter.bind(window,"unload",e.clearAllIntervals);e.saveState(e.storeState(e.extractState(document.location.href,true)));if(b){e.onUnload=function(){var j,l;try{j=g.parse(b.getItem("History.store"))||{}}catch(k){j={}}j.idToState=j.idToState||{};j.urlToId=j.urlToId||{};j.stateToId=j.stateToId||{};for(l in e.idToState){if(!e.idToState.hasOwnProperty(l)){continue}j.idToState[l]=e.idToState[l]}for(l in e.urlToId){if(!e.urlToId.hasOwnProperty(l)){continue}j.urlToId[l]=e.urlToId[l]}for(l in e.stateToId){if(!e.stateToId.hasOwnProperty(l)){continue}j.stateToId[l]=e.stateToId[l]}e.store=j;e.normalizeStore();b.setItem("History.store",g.stringify(j))};e.intervalList.push(setInterval(e.onUnload,e.options.storeInterval));e.Adapter.bind(window,"beforeunload",e.onUnload);e.Adapter.bind(window,"unload",e.onUnload)}if(!e.emulated.pushState){if(e.bugs.safariPoll){e.intervalList.push(setInterval(e.safariStatePoll,e.options.safariPollInterval))}}};return{pushState:function(i,j,h){e.pushState(i,j,h)},replaceState:function(i,j,h){e.replaceState(i,j,h)},getState:function(){return e.getState()},back:function(){e.back()},forward:function(){e.forward()},go:function(h){e.go(h)},init:function(){e.init()}}}();Ext.apply(Ext.ux.History,new Ext.util.Observable());helpiq.Message=function(){var TM=helpiq.i18.messages,EM=Ext.Msg;var dlg,opt,bodyEl,iconEl,titleEl,msgEl,okBtn,activeBtnCls="ux-blue-button";var handleButton=function(name){if(dlg.isVisible()){dlg.hide();var cb=opt[name]&&opt[name].fn?opt[name].fn:opt.fn,sp=opt[name]&&opt[name].scope?opt[name].scope:opt.scope;sp=sp||window;Ext.callback(cb,sp,[name],1);dlg.close();Ext.destroy(dlg);dlg=null}};okBtn=[{text:EM.buttonText.ok,cls:activeBtnCls,handler:handleButton.createCallback("ok")}];return{showError:function(infoIndex,title,fn,scope,btns,front){title=title||TM.error_title;var closable=true;if(infoIndex=="session_out"){var cls="x-window-dlg ui-win-dlg alert-win-msg";closable=false;var borderTitle=true}var infoText=eval("TM."+infoIndex);var options={infoIndex:infoIndex,title:title,text:infoText,cls:cls||"",borderTitle:borderTitle||false,modal:true,closable:closable,iconCls:Ext.Msg.ERROR,buttons:btns||okBtn};if(fn){Ext.apply(options,{fn:fn,scope:scope||this})}this.show(options);if(front){dlg.setZIndex(15000)}},showInfo:function(infoIndex,title,front){title=title||TM.info_title;var info=eval("TM."+infoIndex);if(Ext.isEmpty(info)){info=infoIndex}var cfg=({title:title,text:info,modal:true,iconCls:Ext.Msg.INFO,buttons:okBtn});this.show(cfg);if(front){dlg.setZIndex(15000)}},show_data_Info:function(infoIndex,title,front){var cls="x-window-dlg ui-win-dlg win-adduser-email";if(title=="Information"){cls="x-window-dlg ui-win-dlg win-content-changed"}var cfg=({title:title,text:infoIndex,modal:true,cls:cls,iconCls:Ext.Msg.INFO,buttons:okBtn});this.show(cfg);if(front){dlg.setZIndex(15000)}},showWarning:function(warnIndex,title,buttons,fn,scope){title=title||TM.warn_title;buttons=buttons||okBtn;var options={title:title,height:280,text:eval("TM."+warnIndex),modal:true,iconCls:Ext.Msg.WARNING,cls:"x-window-dlg ui-win-dlg win-show-warning",buttons:[{text:EM.buttonText.ok||helpiq.i18.basic.continue_anyway,cls:activeBtnCls,handler:handleButton.createCallback("ok")},{text:EM.buttonText.cancel,handler:handleButton.createCallback("cancel")}]};if(fn){Ext.apply(options,{fn:fn,scope:scope||this})}this.show(options)},confirm:function(confirmIndex,fn,scope,opt){var txt=(confirmIndex.split(" ").length>1)?confirmIndex:eval("TM."+confirmIndex);var cfg={title:TM.confirm_title,height:240,width:500,text:txt,cls:"confirm-dlt",noBorderTitle:true,buttons:[{text:EM.buttonText.yes,cls:"dlt-confirm-y",handler:handleButton.createCallback("yes")},{cls:"dlt-confirm-n ux-blue-button",text:EM.buttonText.no,handler:handleButton.createCallback("no")}],fn:fn,scope:scope,iconCls:EM.QUESTION,minWidth:EM.minWidth};if(opt){Ext.apply(cfg,opt)}this.show(cfg)},warn:function(text,buttons,fn,scope){var cfg={title:TM.warn_title,text:text,modal:true,iconCls:Ext.Msg.WARNING,height:120,width:350,closable:true,cls:"x-window-dlg ui-win-dlg win-search",buttons:buttons||okBtn,fn:fn,scope:scope};this.show(cfg)},showWarningMessage:function(text,fn,scope,title,buttonText){this.show({title:title||TM.warn_title,text:text,modal:true,height:280,borderTitle:true,cls:"x-window-dlg ui-win-dlg win-wait-user",iconCls:Ext.Msg.WARNING,buttons:[{text:buttonText||helpiq.i18.basic.continue_anyway,cls:activeBtnCls,handler:handleButton.createCallback("ok")},{text:EM.buttonText.cancel,handler:handleButton.createCallback("cancel")}],fn:fn,scope:scope})},showcanMessage:function(text,fn,scope,title,buttonText){this.show({title:title||TM.warn_title,text:text,modal:true,width:650,height:600,borderTitle:true,cls:"x-window-dlg ui-win-dlg win-wait-user",iconCls:Ext.Msg.WARNING,buttons:[{text:buttonText||helpiq.i18.basic.continue_anyway,cls:activeBtnCls,handler:handleButton.createCallback("ok")},{text:EM.buttonText.cancel,handler:handleButton.createCallback("cancel")}],fn:fn,scope:scope})},showUpgradeMessage:function(text,fn,scope,title){this.showWarningMessage(text,fn,scope,title,"Continue")},showSaveWarning:function(options){Ext.apply(options,{iconCls:"ext-mb-warning",title:TM.save_title,text:TM.save_text,closable:true,height:250,buttonAlign:"center",borderTitle:true,cls:"x-window-dlg ui-win-dlg win-save-warning",buttons:[{text:TM.btn_save,cls:activeBtnCls,handler:handleButton.createCallback("save")},{text:"Discard",cls:"no_border_btn",handler:handleButton.createCallback("unsave")}]});this.show(options)},show:function(options){opt=options;var d=this.getDialog(opt);iconEl.addClass(opt.iconCls);if(opt.borderTitle){titleEl.update(opt.title)}msgEl.update(opt.text);d.show()},getDialog:function(cfg){if(!dlg){dlg=new Ext.Window({autoCreate:true,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,draggable:false,stateful:false,modal:true,plain:true,border:false,shadow:true,frame:false,style:"backgroundColor:white; color:#4d4d4d",shim:true,buttonAlign:cfg.buttonAlign||"center",width:cfg.width||500,height:cfg.height||300,minHeight:200,plain:true,closable:cfg.closable||false,cls:cfg.cls||"x-window-dlg ui-win-dlg",buttons:cfg.buttons,close:function(){if(opt&&opt.buttons&&opt.buttons.no&&!opt.buttons.cancel){handleButton("no")}else{handleButton("cancel")}}});dlg.render(document.body);dlg.getEl().addClass("x-window-dlg");bodyEl=dlg.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-text ext-mb-content"><p class="win-header"></p><h2></h2><div class="ext-mb-fix-cursor"></div></div>'});iconEl=Ext.get(bodyEl.dom.firstChild);contentEl=bodyEl.dom.childNodes[1];titleEl=Ext.get(contentEl.firstChild);msgEl=Ext.get(contentEl.childNodes[1])}return dlg},showMask:function(el,mask){helpiq.app.hideMask();var mask=el.mask(mask||helpiq.i18.basic.loading,"ui-loading-msg");Ext.fly(mask).addClass("ui-loading-mask");return mask},hideMask:function(el){el.unmask()}}}();helpiq.Msg=helpiq.Message;Ext.ns("helpiq.util");helpiq.util.Scripts=function(){return{scripts:{},add:function(a,c){if(!Ext.isEmpty(a)){var f="";for(var b=0;b<a.length;b++){var e=a[b];if(this.scripts[e.index]){continue}if(e.type&&"css"==e.type){helpiq.appMgr.addStyle(e.link,e.alia);continue}if(e.type&&"extra"==e.type){continue}f+=e.text;this.scripts[e.index]=true}if(!Ext.isEmpty(f)){var d=c||this;this.addContent(f)}for(var b=0;b<a.length;b++){var e=a[b];if(e.type&&"extra"==e.type){this.addScript(e,c,c[e.callback]);continue}}}},addContent:function(b,f){var d=document.getElementsByTagName("head")[0],a;if(!Ext.isEmpty(b)){a=document.createElement("script");a.setAttribute("type","text/javascript");if(f){a.setAttribute("id",f)}try{a.appendChild(document.createTextNode(b))}catch(c){a.text=b}d.appendChild(a)}},addScript:function(a,d,c,e){if(this.scripts[a.index]){return}var f=document.getElementsByTagName("head")[0],b="";if(!Ext.isEmpty(a.link)){b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a.link);b.onload=c.createDelegate(d||this,e);f.appendChild(b);this.scripts[a.index]=true}},addIndexs:function(a){Ext.each(a,function(b){this.scripts[b]=true},this)},addScriptIndexs:function(c){c=c||{};var b=[];for(var a in this.scripts){b[b.length]=a}c["script_indexs[]"]=b;return c}}}();helpiq.util.History=function(){var a=window.history&&window.history.pushState&&window.history.replaceState;var b=true;return{lang:"",init:function(){if(a){this.initPushState();this.lang=helpiq.project.getLangPath()}else{this.initHash()}},getPushUrl:function(c){var d=c;if("/"==d.substring(0,1)){d=d.substring(1)}if(!Ext.isEmpty(d)&&!Ext.isEmpty(this.lang)){d=d.split("/");if(this.lang==d[0]){d.shift()}d=d.join("/")}return d},preparePushUrl:function(c){var d=c;if(!Ext.isEmpty(this.lang)){d=this.lang+"/"+d}return d},add:function(c){if(a){var d=Ext.ux.History.getState();var f=d.hash;f=this.getPushUrl(f);var e=this.preparePushUrl(c),g=document.title;if(f==e||(this.lang+"/"+f==e)){return false}b=2==arguments.length?arguments[1]:true;Ext.ux.History.pushState({},g,e);b=true}else{this.addHash(c)}},initPushState:function(){Ext.ux.History.init();Ext.ux.History.on("statechange",function(d){var c=d.hash;c=this.getPushUrl(c);if(b){helpiq.util.History.fireEvent("change",c)}},this)},initHash:function(){this.buildHTML();Ext.History.init();Ext.History.on("change",function(c){if("/"==c.substring(0,1)){c=c.substring(1)}if("!"==c.substring(0,1)){c=c.substring(1)}helpiq.util.History.fireEvent("change",c)},this);this.addEvents("change")},buildHTML:function(){var c='<form id="history-form" class="x-hidden notranslate" style="display:none"><input type="hidden" id="x-history-field" class="notranslate" /><iframe id="x-history-frame" class="notranslate"></iframe></form>';Ext.DomHelper.insertFirst(Ext.getBody(),c)},addHash:function(c){Ext.History.add(c,true)},getCurrentUrl:function(){if(a){var c=Ext.ux.History.getState();var d=c.hash;d=this.getPushUrl(d);if(d&&"#!"==d.substring(0,2)){d=d.substring(2)}if(d&&"#"==d.substring(0,1)){this.add(d.substring(1));d=false}if(d&&"/"==d.substring(d.length-1,d.length)){d=d.substring(0,d.length-1)}if(d&&-1!==d.indexOf("?")&&-1!==d.indexOf("=")){d=d.split("?");d=d[0]}return d}else{return this.getCurrentHash()}},getCurrentHash:function(){var c=location.hash;if(!c){c=""}c=c.replace("#!","");c=c.replace("#","");if("/"==c.substring(0,1)){c=c.substring(1)}return c},getPrefix:function(){return a?"":"#"}}}();Ext.apply(helpiq.util.History,new Ext.util.Observable());Ext.ns("helpiq.util");helpiq.util.Analytics=function(){return{masterTracking:false,customerTracking:false,tracker:null,projectUrl:null,domainName:null,customGaName:"cTracker",init:function(){if(typeof ga!=="undefined"){var a=helpiq.project,c=a.getTrackAccount?a.getTrackAccount():"",b="UA-42786397-2";if(!this.masterTracking&&!Ext.isEmpty(b)){ga("create",b,"auto");this.masterTracking=true}if(!this.customerTracking&&!Ext.isEmpty(c)){ga("create",c,"auto",{name:this.customGaName});this.customerTracking=true}}},trackPageView:function(b){var a=b.permalink?b.permalink:"ID"+b.id;if(typeof ga!=="undefined"){this.init();if(this.masterTracking){ga("send","pageview",location.hostname+"/"+a)}if(this.customerTracking){ga(this.customGaName+".send","pageview",a)}}}}}();
/*
 * Ext JS Library 3.3.0
 * Copyright(c) 2006-2010 Ext JS, Inc.
 * licensing@extjs.com
 * http://www.extjs.com/license
 */
Ext.ns("Ext.ux");Ext.ux.Lightbox=(function(){var d={},f=[],e,b=false,i=[],a=-1,g="Item",j="of",h=false,c=400;return{overlayOpacity:0.85,animate:true,resizeSpeed:100,borderSize:10,loadWidth:208,loadHeight:13,params:null,init:function(){this.resizeDuration=this.animate?((11-this.resizeSpeed)*0.15):0;this.overlayDuration=this.animate?0.2:0;if(!b){Ext.apply(this,Ext.util.Observable.prototype);Ext.util.Observable.constructor.call(this);this.addEvents("open","close","openpage");this.initMarkup();this.initEvents();b=true}},fixViewSize:function(){var l=Ext.getDoc().getScroll();var m=l.top+((Ext.lib.Dom.getViewportHeight()-13)/2);var k=(Ext.lib.Dom.getViewportWidth()-this.params.width)/2;d.lightbox.setStyle({top:m+"px",left:k+"px"});this.resizeContent(Ext.num(this.params.width)+22,Ext.num(this.params.height)+57)},initMarkup:function(){d.overlay=Ext.DomHelper.append(document.body,{id:"ux-lightbox-overlay"},true);var k=new Ext.Template(this.getTemplate());d.lightbox=k.append(document.body,{},true);var l=["outerContainer","content-wrap","title","headerText","Container","content","loading","loadingLink","close","navPrev","navNext","nav"];Ext.each(l,function(m){d[m]=Ext.get("ux-lightbox-"+m)});Ext.each([d.overlay,d.lightbox],function(m){m.setVisibilityMode(Ext.Element.DISPLAY);m.hide()});this.resetContent();d.overlay.setOpacity(this.overlayOpacity)},resetContent:function(){var l=this.loadWidth+"px";var k=this.loadHeight+"px";d.outerContainer.applyStyles({width:l,height:k});d.title.applyStyles({display:"none"})},getTemplate:function(){return['<div id="ux-lightbox" class="ux-flat-lb">','<div id="ux-lightbox-outerContainer">','<div id="ux-lightbox-Container">','<div id="ux-lightbox-content-wrap">','<table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody>',"<tr>",'<td class="ux-lightbox-tl"></td>','<td class="ux-lightbox-bd"></td>','<td class="ux-lightbox-tr"></td>',"</tr>","<tr>",'<td class="ux-lightbox-bd"></td>','<td valign="top">','<div id="ux-lightbox-title">','<span id="ux-lightbox-headerText"></span>','<div id="ux-lightbox-close-wrap"><a href="#" id="ux-lightbox-close">close</a></div>',"</div>",'<div id="ux-lightbox-content"></div>',"</div>","</td>",'<td class="ux-lightbox-bd"></td>',"</tr>","<tr>",'<td class="ux-lightbox-bl"></td>','<td class="ux-lightbox-bd">',"</td>",'<td class="ux-lightbox-br"></td>',"</tr>","</tbody></table>","</div>",'<div id="ux-lightbox-loading">','<a id="ux-lightbox-loadingLink"></a>',"</div>","</div>",'<div id="ux-lightbox-nav"  >','<table width="100%">',"<tr>",'<td><a href="#" id="ux-lightbox-navPrev"></a></td>','<td><a href="#" id="ux-lightbox-navNext"> </a></td>',"</tr>","</table>","</div>","</div>"]},initEvents:function(){var k=function(l){l.preventDefault();this.close()};d.overlay.on("click",k,this);d.loadingLink.on("click",k,this);d.close.on("click",k,this);d.lightbox.on("click",function(l){if(l.getTarget().id=="ux-lightbox"){this.close()}},this);Ext.fly(document).on("keydown",function(l){var m=l.getKey();if(m==27){this.close()}},this);d.content.on("click",function(n,l){if(l==n.getTarget("a")){var m=l.hash,r=/^[a-zA-Z0-9-]+$/;var q=m.replace("#","");if(r.test(q)){n.stopEvent();this.scrollToBookmark(q)}te=Ext.fly(l);var p=te.getAttribute("hqid");if(Ext.isEmpty(p)){if(te.hasClass("hq-lightbox")){n.stopEvent();this.open(l.href)}else{helpiq.MainTabPanel.prototype.checkToggleContent.call(this,l,n,d.content)}}else{n.stopEvent();this.fireEvent("openpage",p);var o=this.params||{};o.topic_id=p;this.openPage(o)}}},this);d.navPrev.on("click",function(l){l.preventDefault();this.openGroupItem(this.curIndex-1)},this);d.navNext.on("click",function(l){l.preventDefault();this.openGroupItem(this.curIndex+1)},this)},scrollToBookmark:function(m){var k=d.content.child("#"+m+", [name="+m+"]");if(k){var l=(Ext.fly(k).getOffsetsTo(d.content)[1])+d.content.dom.scrollTop;d.content.scrollTo("top",l-25,{duration:0.5})}else{d.content.scrollTo("top",0,{duration:0.5})}},getMediaType:function(k){var l="ajax";imgRegex=/\.(gif|jpg|jpeg|tiff|png)/i;iframeRegex=/iframe=true/i;if(imgRegex.test(k)){l="img"}if(iframeRegex.test(k)){l="iframe"}return l},openImageLB:function(m,k,l){var o="a[rel^="+l.rel+"]";var n="lightbox"!=Ext.util.Format.trim(l.rel);if(!n){this.activeImage=l}this.openMixItem(l.href,o,n,null,null,m)},register:function(k,l){if(i.indexOf(k)===-1){i.push(k);Ext.getDoc().on("click",function(m){var n=m.getTarget(k);if(n){m.preventDefault();this.openMixItem(n.href,k,l,null,null,true);this.activeImage=n}},this)}},registerItems:function(){var m=this,l=Ext.query("a[rel^=lightbox]");var k=tempflag=[];Ext.each(l,function(n){if(n.href&&n.rel.split(" ").length>1){if(!tempflag[n.rel]){k.push(n.rel);tempflag[n.rel]=true}}});m.register("a[rel^=lightbox]");Ext.each(k,function(n){m.register("a[rel^="+n+"]",true)})},openPage:function(n,l,u,t,w){this.params=n;h=u;var p=n.bg=="true"||n.bg=="on";if(p){d.overlay.addClass("ux-lightbox-bg ux-lb-flat-bg")}else{d.overlay.removeClass("ux-lightbox-bg");d.overlay.removeClass("ux-lb-flat-bg")}u=u||false;d.nav.hide();d.navPrev.hide();d.navNext.hide();this.setViewSize();d["content-wrap"].setDisplayed(false);d.overlay.setDisplayed(true);var m=Ext.getDoc().getScroll();var r=m.top+((Ext.lib.Dom.getViewportHeight()-13)/2);var v=(Ext.lib.Dom.getViewportWidth()-n.width)/2;d.lightbox.setStyle({top:r+"px",left:v+"px",width:n.width+"px"}).show();if(this.params.media==="img"){var s=new Image(),q=this;s.onload=(function(){q.setImageContent(n.path,t,w)}).createDelegate(this);this.resetContent();d.content.setDisplayed(false);d.loading.show();s.src=n.path}else{if(this.params.media==="iframe"){var o=n.path;delete n.path;delete n.media;var k=o+"?"+Ext.urlEncode(n);this.setIframeContent(k,t,w)}else{var o=this.path;delete n.path;delete n.media;var k=o+"?"+Ext.urlEncode(n);this.setContent(k,t,w)}}this.fireEvent("open",k)},open:function(l,o,p,n,m){var r=l.lastIndexOf("/?");var k=l.substring(r+2);var q=Ext.urlDecode(k);q.media="ajax";this.path=l.substring(0,r+1);this.openPage(q,o,p,n,m)},openImage:function(l,m,r,q,s){var p,k;if(-1!==l.indexOf("?")){var o=l.split("?");k=o[0];l=o[1]}else{p=l.indexOf("&");k=l.substring(0,p);l=l.substring(p+1)}var n=Ext.urlDecode(l);n.media="img";n.path=k;n.bg="true";this.openPage(n,m,r,q,s)},openIframeLB:function(l,k){this.activeImage={};if(k&&k.title){this.activeImage.title=k.title}if(k&&k.bg){this.activeImage.bg=k.bg}this.openIframe(l,null,null,null,this)},openIframe:function(l,o,p,n,m){var r=l.lastIndexOf("/?");var k=l.substring(r+2);var q=Ext.urlDecode(k);q.media="iframe";q.path=l.substring(0,r+1);q.bg=this.activeImage&&(typeof this.activeImage.bg!="undefined")?this.activeImage.bg:"true";this.openPage(q,o,p,n,m)},openMixItem:function(k,m,t,s,v,n){var u=k,w;var r=k.lastIndexOf("/?");if(r!=-1){w=k.substring(r+2)}else{r=k.indexOf("&");w=k.substring(r+1)}f=[];var o=Ext.urlDecode(w);if(!t){if(this.getMediaType(k)==="img"){this.openImage(k,m,t,s,v)}if(this.getMediaType(k)==="iframe"){this.openIframe(k,m,t,s,v)}if(this.getMediaType(k)==="ajax"){this.open(k,m,t,s,v)}}else{var p=0,q=this,l;if(n){l=Ext.query(m)}else{l=n.child(m,true)}Ext.each(l,function(x){if(x.href){f.push([x.href,x.title,q.getMediaType(x)])}});var p=0;while(f[p]&&f[p][0]!=u){p++}this.openGroupItem(p)}},openGroupItem:function(l){this.curIndex=l;var k=f[l][0];var o,n,m;this.activeImage={href:k,title:f[l][1]};if(this.getMediaType(k)==="img"){this.openImage(k,o,true,n,m)}if(this.getMediaType(k)==="iframe"){this.openIframe(k,o,true,n,m)}if(this.getMediaType(k)==="ajax"){this.open(k,o,true,n,m)}},setViewSize:function(){var k=this.getViewSize();d.overlay.setStyle({width:k[0]+"px",height:k[1]+"px"})},setImageContent:function(k,m,l){var n=this.params;if(this.activeImage&&this.activeImage.title!=""){d.headerText.show();d.headerText.update(this.activeImage.title)}else{d.headerText.hide()}d["content-wrap"].setDisplayed(true);d.content.update('<img src="'+k+'" id="lbimg" style="height:auto; width:auto; max-width:'+this.params.width+"px; max-height:"+this.params.height+'px;">');d.loading.hide();d.content.show();d.title.applyStyles({display:"block"});this.resizeContent(Ext.num(n.width)+22,Ext.num(n.height)+57);d.content.applyStyles({overflow:"hidden"})},setIframeContent:function(k,m,l){var n=this.params;if(this.activeImage&&this.activeImage.title!=""){d.headerText.show();d.headerText.update(this.activeImage.title)}else{d.headerText.hide()}d["content-wrap"].setDisplayed(true);d.content.update('<iframe src="'+k+'" width="'+n.width+'" height="'+n.height+'" frameborder="0"></iframe>');d.loading.hide();d.content.show();d.title.applyStyles({display:"block"});this.resizeContent(Ext.num(n.width)+22,Ext.num(n.height));d.content.applyStyles({overflow:"hidden"})},setContent:function(l,n,m){this.resetContent();var k=d.loading;if(this.animate){d.loading.show()}var o=this.params;d.content.setDisplayed(false);d.content.applyStyles({overflow:"auto"});Ext.Ajax.request({url:l,scope:this,success:function(q){d.loading.hide();d["content-wrap"].setDisplayed(true);var p=Ext.decode(q.responseText);d.content.update(p.content);d.headerText.show();d.headerText.update(p.title);d.title.applyStyles({display:"block"});this.resizeContent(Ext.num(o.width),Ext.num(o.height));if(n){n.call(m||this,d.content,o,p)}if(!Ext.isEmpty(o.anchor)){var r=o.anchor,s=d.content.child("[id='"+r+"'], [name='"+r+"']");if(s){var t=(Ext.fly(s).getOffsetsTo(d.content)[1])+d.content.dom.scrollTop;d.content.scrollTo("top",t-25)}else{d.content.dom.scrollTop="0px"}}else{d.content.dom.scrollTop="0px"}}})},resizeContent:function(q,l){var s=d.outerContainer.getWidth();var o=d.outerContainer.getHeight();var n=q;var m=l;var p=s-n;var k=o-m;var r=function(){Ext.getBody().setStyle({"overflow-y":"auto"});d.outerContainer.setWidth(n);d.outerContainer.setHeight(m);var w=Ext.lib.Dom.getViewportHeight(),v=d.outerContainer.getHeight(),u=Ext.lib.Dom.getViewportWidth(),t=d.outerContainer.getWidth();if(u<=t){n=(u<c)?c-22:u-22;d.lightbox.setStyle({left:(((u-n)/2)-8)+"px"})}if(this.params.media==="img"){Ext.get("lbimg").setStyle({width:n+"px"});v=m=Ext.get("lbimg").getHeight();d.lightbox.setStyle({width:n+"px",height:(m+57)+"px"});d.outerContainer.setStyle({width:n+"px",height:(m+57)+"px"})}d.lightbox.setStyle({top:((w>v)?((w-(v+57))/2):"5")+"px"});this.showContent(n,m)};r.call(this)},showContent:function(k,l){d.loading.hide();k-=22;d.content.applyStyles({display:"block",height:l+"px",width:k+"px"});d.overlay.setStyle({width:"100%"});if(h&&f.length>1){d.nav.show();d.navPrev.setVisible(this.curIndex>0);d.navNext.setVisible(this.curIndex<(f.length-1));d.navPrev.applyStyles({top:((l/2)+16)+"px"});d.navNext.applyStyles({top:((l/2)+16)+"px"})}},close:function(){d.lightbox.hide();d.overlay.hide();Ext.getBody().setStyle({"overflow-y":"hidden"});this.fireEvent("close")},getViewSize:function(){return[Ext.lib.Dom.getViewWidth(),Ext.lib.Dom.getViewHeight()]},getContentEl:function(){return d.content}}})();Ext.onReady(Ext.ux.Lightbox.init,Ext.ux.Lightbox);Ext.ns("helpiq");helpiq.ToolTip=Ext.extend(Ext.ToolTip,{shadow:false,floating:{shadow:false,shim:true,useDisplay:true,constrain:false},trackMouse:false,autoHide:false,cls:"ui-tip-preview",showDelay:0,hideDelay:0,dismissDelay:0,quickShowInterval:0,toolTarget:"bwrap",textTipId:"hiq-staic-text-tip-999999",cmd:"tooltip/get",tipTpl:'<div class="tooltip"><tpl if="closable"><img src="'+Ext.BLANK_IMAGE_URL+'" class="x-tool-close"/></tpl>{content}</div>',finished:false,cssId:"helpiq-css-id-999999",initComponent:function(){this.tipTpl=new Ext.XTemplate(this.tipTpl);helpiq.ToolTip.superclass.initComponent.call(this);this.addEvents("beforeshowtip")},afterRender:function(){helpiq.ToolTip.superclass.afterRender.call(this);this.on("hide",this.hideTip)},delayShow:function(){this.fireEvent("beforeshowtip",this);this.show()},onTargetOver:function(b){var a=b.getTarget(this.delegate);if(a){this.triggerElement=a;this.targetXY=b.getXY();this.delayShow()}else{if(!this.closable){this.delayHide()}}},onShow:function(){if(this.floating){this.el.show({duration:0.15,easing:"easeIn"})}Ext.Panel.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){if(this.floating){this.el.hide()}Ext.Panel.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},initButtonClose:function(){var a=this.body.select(".x-tool-close");if(a){a.on("click",function(b){b.stopEvent();this[this.closeAction]()},this)}},onDocMouseDown:function(a){if(!a.within(this.el.dom)){this[this.closeAction]()}},showLoading:function(){this.closable=false;this.mouseOffset=[5,5];this.body.update('<div class="tip-loading"></div>')},showTip:function(b,a){if("text"==a){this.finished=true;this.tipData={closable:false,content:b,id:this.textTipId};b=this.textTipId}this.checkTipId(b);if(!this.finished){this.loadTip(a,b)}else{this.updateTip(this.tipData)}},updateTip:function(a){this.body.update('<div class="tooltip-wrap">'+this.tipTpl.apply(a)+"</div>");this.initButtonClose()},hideTip:function(){this.finished=false},loadTip:function(a,b){this.showLoading();if("text"==a&&b==this.textTipId){this.showData()}else{helpiq.get({cmd:a||this.cmd,params:{id:b},scope:this,success:this.showData})}},showData:function(c){var e=c&&c.data?c.data:this.tipData;this.finished=true;this.tipData=e;this.tipData.css=c.css||"";var d=[5,5],b=250,f=d,a=b;f=[e.offset_x||d[0],e.offset_y||d[1]];a=e.width;this.closable=e.closable;this.mouseOffset=f;if(a){this.measureWidth=false;this.maxWidth=a;this.el.setWidth(a);this.body.setWidth(a)}else{this.measureWidth=true}this.delayShow()},checkTipId:function(a){if(this.finished&&this.tipData&&a!=this.tipData.id&&a!=this.tipData.custom_id){this.finished=false;this.tipData.closable=false}}});Ext.ux.Printer=function(){return{renderers:{},registerRenderer:function(b,a){this.renderers[b]=new (a)()},getRenderer:function(a){return this.renderers[a]},print:function(a){var d=a.getXTypes().split("/");for(var b=d.length-1;b>=0;b--){var e=d[b],c=this.getRenderer(e);if(c!=undefined){c.print(a);break}}}}}();Ext.override(Ext.Component,{getXTypes:function(){var a=this.constructor;if(!a.xtypes){var e=[],b=this;while(b){var d=b.constructor.xtype;if(d!=undefined){e.unshift(d)}b=b.constructor.superclass}a.xtypeChain=e;a.xtypes=e.join("/")}return a.xtypes}});Ext.ux.Printer.BaseRenderer=Ext.extend(Object,{print:function(b){var a=(b&&b.getXType)?String.format("print_{0}_{1}",b.getXType(),b.id):"print";a=a.replace("_","xxx");a=a.replace("-","xxx");var c=window.open("");c.document.write(this.generateHTML(b));c.document.close();var d=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;if(d){setTimeout(function(){c.print()},200);setTimeout(function(){c.close()},300)}else{c.print();c.close()}},generateHTML:function(c){var b=this.stylesheetPath;var e=Math.floor(Date.now());b=b.replace("false.css",e+".css");var f='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /><link href="'+b+'" rel="stylesheet" type="text/css" media="screen,print" /><title>'+this.getTitle(c)+"</title><style> @page { size: A4; margin: 23mm 10mm 20mm 10mm; } @media print {  body{} table{ page-break-inside:auto !important ;} tr{ page-break-inside:avoid; page-break-after:auto ;}  td{ page-break-inside:avoid; page-break-after:auto ;}  thead { display:table-header-group; }  tfoot { display:table-footer-group; }} </style></head><body>";var a=this.generateBody(c);var d=f+a+"</body></html>";return d},generateBody:Ext.emptyFn,prepareData:function(a){return a},getTitle:function(a){return typeof a.getTitle=="function"?a.getTitle():(a.title||"Printing")},stylesheetPath:"stylesheets/print.css"});Ext.ux.Printer.ColumnTreeRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(b){var c=this.getColumns(b);var d=this.headerTpl.apply(c);var a=this.bodyTpl.apply(c);return String.format('<table>{0}<tpl for=".">{1}</tpl></table>',d,a)},getColumns:function(a){return a.columns},prepareData:function(a){var b=a.root,d=[],g=this.getColumns(a),e=this.indentPadding;var c=function(f){if(f.hidden===true||f.isHiddenRoot()===true){return}var h=Ext.apply({depth:f.getDepth()*e},f.attributes);Ext.iterate(h,function(i,j){Ext.each(g,function(k){if(k.dataIndex==i){h[i]=k.renderer?k.renderer(j):j}},this)});h[this.getColumns(a)[0].dataIndex]=f.attributes.text;d.push(h)};b.cascade(c,this);return d},indentPadding:15,headerTpl:new Ext.XTemplate("<tr>",'<tpl for=".">','<th width="{width}">{header}</th>',"</tpl>","</tr>"),bodyTpl:new Ext.XTemplate("<tr>",'<tpl for=".">','<td style="padding-left: {[xindex == 1 ? "\\{depth\\}" : "0"]}px">{{dataIndex}}</td>',"</tpl>","</tr>")});Ext.ux.Printer.registerRenderer("columntree",Ext.ux.Printer.ColumnTreeRenderer);Ext.ux.Printer.GridPanelRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(c){var b=this.getColumns(c);var d=this.headerTpl.apply(b);var a=this.bodyTpl.apply(b);return String.format('<table>{0}<tpl for=".">{1}</tpl></table>',d,a)},prepareData:function(b){var a=this.getColumns(b);var c=[];b.store.data.each(function(d){var e={};Ext.iterate(d.data,function(f,g){Ext.each(a,function(h){if(h.dataIndex==f){e[f]=h.renderer?h.renderer(g,null,d):g;return false}},this)});c.push(e)});return c},getColumns:function(b){var a=[];Ext.each(b.getColumnModel().config,function(c){if(c.hidden!=true){a.push(c)}},this);return a},headerTpl:new Ext.XTemplate("<tr>",'<tpl for=".">',"<th>{header}</th>","</tpl>","</tr>"),bodyTpl:new Ext.XTemplate("<tr>",'<tpl for=".">',"<td>{{dataIndex}}</td>","</tpl>","</tr>")});Ext.ux.Printer.registerRenderer("grid",Ext.ux.Printer.GridPanelRenderer);Ext.ns("helpiq.ux");helpiq.ux.ActionButton=Ext.extend(Ext.Button,{actionCls:"ux-loading",initComponent:function(){if(!this.beforeHandler){this.beforeHandler=function(){return true}}this.actionHandler=this.handler;this.actionScope=this.scope;this.handler=this.defaultHandler;this.scope=this;helpiq.ux.ActionButton.superclass.initComponent.call(this);this.addEvents("action","afteraction")},initEvents:function(){helpiq.ux.ActionButton.superclass.initEvents.call(this);this.on("afteraction",this.reset,this)},defaultHandler:function(a,b){if(this.beforeHandler.call(this.actionScope||this,this,b)){if(!this.actionHandler){return}this.doActive();this.actionHandler.call(this.actionScope||this,this,b)}},beforeHandler:function(){return true},reset:function(){this.enable();this.setIconClass("")},doActive:function(){this.disable();this.setIconClass(this.actionCls)}});Ext.ActionButton=helpiq.ux.ActionButton;Ext.reg("actionbtn",helpiq.ux.ActionButton);Ext.ns("helpiq","helpiq.lib");helpiq.request=function(a){var d={};if(helpiq.project){d=helpiq.applyBaseParams(d)}if(a.params){Ext.apply(d,a.params)}if(a.timeout){var c=a.timeout}else{var c=helpiq.AJAX_TIMEOUT*1000}if(a.onDemand){d=helpiq.util.Scripts.addScriptIndexs(d)}var b={url:helpiq.DISPATCH_URL+a.cmd+"/",params:d,timeout:c,success:function(e){var f=Ext.decode(e.responseText);var g=f.errorlabel,h=helpiq.Msg;if(f.success){if(a.onDemand&&f.scripts){helpiq.util.Scripts.add(f.scripts,a.scope||this);delete f.scripts}if(g&&h){h.showError(g,null)}if(a.success){a.success.call(a.scope||this,f)}}else{if(g&&h){h.showError(g,"Oh-oh","session_out"==g?function(i){if("ok"==i){location.href=helpiq.project.getSiteAddress()+"login";return false}}:null)}if(a.failure){a.failure.call(a.scope||this,f)}}},failure:function(g){var f=Ext.decode(g.responseText);if(g.isTimeout&&a.onTimeout&&"function"==typeof(a.onTimeout)){a.onTimeout.call(a.scope||this,f)}else{if(!a.noRetry&&helpiq.Msg){if(a.failure){a.failure.call(a.scope||this,f)}else{var e=Ext.MessageBox.buttonText.ok;Ext.MessageBox.buttonText.ok=helpiq.i18.basic.try_again;helpiq.Msg.showError("save_failed",null,function(h){if(h=="ok"){helpiq.request(a)}},this,Ext.Msg.OKCANCEL,true);Ext.MessageBox.buttonText.ok=e}}else{if(a.failure){a.failure.call(a.scope||this,f)}}}}};Ext.applyIf(b,a);return Ext.Ajax.request(b)};helpiq.get=function(a,b,c){if(!Ext.isDefined(b)){b=a.cmd}var a=Ext.apply(a,{method:"GET",cmd:b,noRetry:c});return helpiq.request(a)};helpiq.post=function(a,b,c){if(!Ext.isDefined(b)){b=a.cmd}var a=Ext.apply(a,{method:"POST",cmd:b,noRetry:c});return helpiq.request(a)};helpiq.submit=function(f,b,g){if(!Ext.isDefined(g)){g=b.cmd}var h={};if(helpiq.project){h=helpiq.applyBaseParams(h)}if(b.params){Ext.apply(h,b.params)}var e=b.timeout||helpiq.SUBMIT_TIMEOUT;delete b.timeout;if(b.clientValidation===false||f.isValid()){var a=b.success||Ext.emptyFn;var d=b.failure||Ext.emptyFn;delete b.success;delete b.failure;var c=Ext.applyIf({url:helpiq.DISPATCH_URL+g,params:h,timeout:e,success:function(k,l){var i=Ext.decode(l.response.responseText);var j=i.errorlabel,m=helpiq.Msg;if(j&&m){m.showError(j,null)}if(i.scripts){helpiq.util.Scripts.add(i.scripts,b.scope||this);delete i.scripts}if(a){a.call(b.scope||this,k,l,i)}else{d.call(b.scope||this,k,l,i)}},failure:function(m,n){var l=function(r,s,p){if(s&&s.response&&s.response.isTimeout&&"function"==typeof(p.onTimeout)){p.onTimeout.call(p.scope||this,r,s)}else{if(d){var q={};if(s.response&&s.response.responseText){q=Ext.decode(s.response.responseText)}d.call(p.scope||this,r,s,q)}}};if(!b.noRetry&&helpiq.Msg){var j={};if(n.response&&n.response.responseText){j=Ext.decode(n.response.responseText)}var k=j.errorlabel,o=helpiq.Msg;if("session_out"==k){o.showError(k,null,function(p){if("ok"==p){location.href=helpiq.project.getSiteAddress()+"login";return false}},this)}else{var i=Ext.MessageBox.buttonText.ok;Ext.MessageBox.buttonText.ok=helpiq.i18.basic.try_again;o.showError("save_failed",null,function(p){if(p=="ok"){m.submit(c)}},this,Ext.Msg.OKCANCEL,true);Ext.MessageBox.buttonText.ok=i}}else{l.call(this,m,n,b)}if(n&&n.response&&n.response.isTimeout&&"function"==typeof(b.onTimeout)){b.onTimeout.call(b.scope||this,m,n)}}},b);f.submit(c)}};helpiq.download=function(e,b){b=(b)?b:{};var g=b.contentType?b.contentType:"application/json";var a=[{tag:"input",type:"hidden",name:"contentType",value:g}];if(b.data){a.push({tag:"input",type:"hidden",name:"data",value:b.data.replace(/"/g,"&quot;")})}if(b.params){for(var c in b.params){a.push({tag:"input",type:"hidden",name:c,value:b.params[c]})}}if(!Ext.get("downloadFrame")){var f=Ext.DomHelper.append(document.body,{tag:"iframe",name:"downloadFrame",id:"downloadFrame",style:"display: none"})}var d=Ext.DomHelper.append(document.body,{tag:"form",target:"downloadFrame",action:helpiq.DISPATCH_URL+e,method:"get",children:a});d.submit();Ext.get(d).remove()};helpiq.applyBaseParams=function(b){var a=helpiq.project;b=b||{};Ext.apply(b,{company_id:a.getCompanyId(),project_id:a.getProjectId(),parent_id:a.getParentId(),ui_lang:a.getLang(),prim_index:a.getPrimaryId(),view_mode:a.getViewMode(),user_index:helpiq.user.getUserId(),preview:HELPIQ.preview?1:"",inst_preview:HELPIQ.inst_preview?1:""});return b};helpiq.adminOverride=function(a,b){Ext.apply(this,b);Ext.override(a,b)};Ext.ns("helpiq","helpiq.data");helpiq.data.TreeLoader=Ext.extend(Ext.tree.TreeLoader,{requestMethod:"GET",constructor:function(a){a.dataUrl=helpiq.DISPATCH_URL+a.cmd+"/";var b={};if(helpiq.project){b=helpiq.applyBaseParams(b)}if(a.baseParams){Ext.apply(b,a.baseParams)}a.baseParams=b;helpiq.data.TreeLoader.superclass.constructor.call(this,a)}});helpiq.data.ReadOnlyStore=Ext.extend(Ext.data.Store,{constructor:function(b){var c={};if(helpiq.project){c=helpiq.applyBaseParams(c)}if(b.baseParams){Ext.apply(c,b.baseParams)}b.baseParams=c;var a=Ext.apply({autoDestroy:true,autoSave:true,reader:new Ext.data.JsonReader(Ext.apply(b,{root:"data",idProperty:"id"}),b.rt?b.rt:null),proxy:new Ext.data.HttpProxy(Ext.apply(b,{url:helpiq.DISPATCH_URL+b.cmd+"/",method:b.method||"POST"}))},b);helpiq.data.ReadOnlyStore.superclass.constructor.call(this,a)}});Ext.ns("helpiq");helpiq.ROOT_URL="/";helpiq.DISPATCH_URL=helpiq.ROOT_URL;helpiq.SWITCH_PROJECT_URL=helpiq.ROOT_URL+"project/change/";helpiq.BLANK_IMAGE_URL=helpiq.ROOT_URL+"resources/lib/images/s.gif";helpiq.IMAGES_URL=helpiq.ROOT_URL+"resources/app/images/";helpiq.FLAGS_URL=helpiq.ROOT_URL+"resources/app/flags/";helpiq.ICON_LOAD=helpiq.ROOT_URL+"resources/app/images/loading32.gif";helpiq.LOAD_HTML='<div class="ui-panel-mask"></div><div class="loading-indicator"><img alt="" src="'+helpiq.ICON_LOAD+'"/></div>';helpiq.PARAM_SEPERATOR="_";helpiq.CHANGE_VIEW_URL=helpiq.ROOT_URL+"main/change_view/";helpiq.USER_FILES_URL=helpiq.ROOT_URL+"userfiles/";helpiq.AJAX_TIMEOUT=75;helpiq.SUBMIT_TIMEOUT=35;Ext.ns("helpiq","helpiq.api");helpiq.api.search=function(a){Ext.apply(a,{params:{keyword:a.keyword,type:a.type,sort:a.sort,not:a.not,projectlist:a.projectlist}});helpiq.get(a,"search")};helpiq.api.quickSearch=function(a){Ext.apply(a,{params:{keyword:a.keyword}});helpiq.get(a,"search/quick_se")};helpiq.api.topic={getContent:function(a){params=a.params||{};params.id=a.id;Ext.apply(a,{params:params});helpiq.get(a,"topic/get_content",true)}};helpiq.api.folder={getInfo:function(b,c,a){helpiq.get(Ext.apply({params:{fid:b}},a),"folder/get_folderPermalink",true)}};helpiq.api.topic.PUBLISHED=1;helpiq.api.topic.DRAFTED=0;helpiq.api.topic.TYPE_TEXT=0;helpiq.api.topic.TYPE_VIDEO=1;helpiq.api.feedback={GOOD:1,BAD:0};helpiq.api.ACTIVE=1;helpiq.api.INACTIVE=0;helpiq.api.project={};helpiq.api.project.HEADER_DEFAULT=0;helpiq.api.project.HEADER_CUSTOM=1;helpiq.api.project.HEADER_ZENDESK=2;Ext.ns("helpiq");helpiq.Project=Ext.extend(Object,{data:{},topic:null,tocLoader:null,indexLoader:null,listStore:null,planRes:null,planResIndexes:null,langs:null,params:{},tbar:{},siteHeader:{},viewMode:"view",siteCssId:"custom-site-css",constructor:function(){helpiq.Project.superclass.constructor.call(this);this.data={company_id:"",project_id:"",primary_id:"",parent_id:"",lang:"en"};this.initPO(this.data,"getData")},initialize:function(a){this.data=a.project;this.list=a.sites;this.topic=a.topic;this.params=a.params;this.langs=a.langs;this.siteHeader=a.site_header;this.viewMode=a.view_mode;this.planRes=a.plan_res;this.planResIndexes=a.plan_res_indexes;this.tbar=a.tbar;this.initPO(this.data,"getData");this.initPO(this.params,"getParam");this.getId=this.getProjectId;this.initGlobalVariables(a);this.loadTipCss();this.initPlanResources();this.custom_stats=a.custom_stats;this.jira_status=a.jira_status;this.plan_code=a.plan["plan_code"];this.pub_pages=a.pub_pages;this.new_site_list=a.new_site_list;this.user_email=a.user_email;this.first_name=a.first_name;this.zendesk_data=a.params.zendesk_data},initPlanResources:function(){if(this.planRes){Ext.each(this.planRes,function(res){var res=eval(res);if(res){res.initialize()}},this);helpiq.util.Scripts.addIndexs(this.planResIndexes)}},initPO:function(d,c){for(var b in d){var a=helpiq.appMgr.getMethodName(b,"_");if(!this["get"+a]){this["get"+a]=this[c].createDelegate(this,[b])}}},getData:function(a){return this.data[a]},getParam:function(a){return this.params[a]},applyTocCls:function(b){b=b||this.data;var f=b.show_folder_icon,a=b.show_page_icon,d=b.show_book_icon,c=b.toc_style,g=helpiq.app.getNavigator(),e=g.docTree;if(f&&!HELPIQ.newToc){g.el.removeClass("ui-sidenav-nofolder")}else{g.el.addClass("ui-sidenav-nofolder")}if(a==1){g.el.removeClass("ui-sidenav-nopage");g.el.removeClass("ui-sidenav-folderstyl_plus");g.el.removeClass("ui-sidenav-folderstyl_arrow")}else{if(a==2){g.el.removeClass("ui-sidenav-nopage");g.el.removeClass("ui-sidenav-nofolder");g.el.removeClass("ui-sidenav-bookstyl");g.el.removeClass("ui-sidenav-folderstyl_arrow");g.el.addClass("ui-sidenav-folderstyl_plus")}else{if(a==3){g.el.removeClass("ui-sidenav-nopage");g.el.removeClass("ui-sidenav-nofolder");g.el.removeClass("ui-sidenav-bookstyl");g.el.removeClass("ui-sidenav-folderstyl_plus");g.el.addClass("ui-sidenav-folderstyl_arrow")}else{g.el.addClass("ui-sidenav-nopage");g.el.removeClass("ui-sidenav-folderstyl_plus");g.el.removeClass("ui-sidenav-folderstyl_arrow")}}}if(d){g.el.removeClass("ui-sidenav-nopage");g.el.removeClass("ui-sidenav-folderstyl_plus");g.el.removeClass("ui-sidenav-folderstyl_arrow");g.el.addClass("ui-sidenav-bookstyl")}else{g.el.removeClass("ui-sidenav-bookstyl")}},getTocLoader:function(a){if(!this.tocLoader){this.tocLoader=new helpiq.DocsTreeLoader(Ext.applyIf({cmd:"topic/nav/load_toc_tree",baseAttrs:{singleClickExpand:true,uiProvider:helpiq.TocNodeUI}},a))}return this.tocLoader},getIndexLoader:function(a){if(!this.indexLoader){this.indexLoader=new helpiq.data.TreeLoader(Ext.applyIf({cmd:"topic/nav/load_index_tree",preloadChildren:true,clearOnLoad:false},a))}return this.indexLoader},getListStore:function(){if(!this.listStore){this.listStore=new helpiq.data.ReadOnlyStore({cmd:"topic/nav/load_index_list",fields:["id","text","permalink","title","hidden"]})}return this.listStore},loadTopicCss:function(){helpiq.appMgr.addStyle(this.getTopicCSSPath(),"topic")},loadTipCss:function(){helpiq.appMgr.addStyle(this.getTipCSSPath(),"tooltip")},getTopicCSSPath:function(){var a=helpiq.USER_FILES_URL;a+=this.getCompanyId()+"/topic-css/style-"+this.getProjectId()+"-"+this.params.topic_css_update+".css";return a},getLocalUrl:function(){var a=location.protocol+"//"+location.host+"/",b=location.pathname;b=b.replaceAll("/","");if(!Ext.isEmpty(b)){a+=b+"/"}a=Ext.util.Format.lowercase(a);return a},initGlobalVariables:function(a){helpiq.permission=new helpiq.Permission();helpiq.permission.init(a.components,a.project["link_to_category"])},getActiveProjectAddress:function(){return this.data.project_address},getShortProjectUrl:function(){var a=this.getProjectAddress();a=a.replace("http://","");a=a.replace("https://","");if(-1!=a.lastIndexOf("/")){a=a.substring(0,a.lastIndexOf("/"))}return a},getShortSiteUrl:function(){var a=this.getSiteAddress();a=a.replace("http://","");a=a.replace("https://","");if(-1!=a.lastIndexOf("/")){a=a.substring(0,a.lastIndexOf("/"))}a=a.split(".");return a[1]+"."+a[2]},getTopic:function(){return this.topic},getProjectUrl:function(b){var a=this.getProjectAddress();a=Ext.util.Format.lowercase(a);return a},getTipCSSPath:function(){var a=this.getCompanyPath();a+="tooltip-css/style-"+this.getProjectId()+".css";return a},getProjectPath:function(){return this.getCompanyPath()+this.getProjectId()+"/"},getHeaderScript:function(){return this.siteHeader.script},getHeaderType:function(){return Ext.num(this.siteHeader.header_type)},getLogo:function(){return this.siteHeader.logo?this.siteHeader.logo:""},getTextColor:function(){return this.siteHeader.text_color},getBackgroundColor:function(){return this.siteHeader.header_color},getBackgroundRepeat:function(){return this.siteHeader.background_repeat},getBackgroundImage:function(){return this.siteHeader.header_background?this.siteHeader.header_background:""},getHeaderHeight:function(){return this.siteHeader.header_height?Ext.num(this.siteHeader.header_height):50},getDefaultHeight:function(){return this.siteHeader.default_height?Ext.num(this.siteHeader.default_height):45},getLogLink:function(){return this.siteHeader.log_in_link},getHeaderHTML:function(){return this.siteHeader.html_code},getHeaderCSS:function(){return this.siteHeader.css_code},getSiteCss:function(){return this.siteHeader.css_override},hasKeywordIndex:function(){return helpiq.api.ACTIVE==this.data.keyword_index},isAllowUserView:function(){return"1"==this.data.user_view},isAllowDocxTool:function(){return"1"==this.data.docx_tool},isRestrictCopy:function(){return"1"==this.data.copy_restrict},hasHugeData:function(){return 1==this.params.huge_data},hasLangs:function(){return true==this.langs.active},getViewMode:function(){return this.viewMode},getSharing:function(){return 1==this.data.share},compstatus:function(){return this.data.status},checkSiteCSS:function(){Ext.util.CSS.removeStyleSheet(this.siteCssId);Ext.util.CSS.createStyleSheet(this.getSiteCss(),this.siteCssId)},getProjectById:function(e){var d=this.list.data;var b;for(var c=0,a=d.length;c<a;c++){var b=d[c];if(e==b.prj_id){break}}return b},refreshList:function(g){if(!Ext.isEmpty(g)){this.list=g}var k=helpiq.app.getUserBar(),a=k.getBottomToolbar(),d=a.items.item(k.btnSwitchId),l=a.items.itemAt(a.items.indexOf(d)+1),h=this.getProjectId(),c=this.getProjectById(h),e=this.list.active,i=this.list.data;if(!d){return}var l=a.items.itemAt(a.items.indexOf(d)+1),j=[],b,f=[],h=this.getProjectId(),i=this.list.data,c=this.getProjectById(h);Ext.each(i,function(m){b={text:(h==m.prj_id?(m.prj_name+'<span class="activeIcon"></span>'):m.prj_name),group:"prjs",cls:(h==m.prj_id?"activeSiteicon userbarsites_noicon ":"userbarsites_noicon "),scope:k,handler:k.switchProject.createDelegate(k,[m])};if(m.tpls){f=[];Ext.each(m.tpls,function(n){f.push({text:n.prj_name,group:"prjs_"+m.prj_id,checked:h==n.prj_id,scope:k,handler:k.switchProject.createDelegate(k,[n])})},this);b.menu={items:f}}j.push(b)},this);if(this.viewMode=="admin"||this.viewMode=="sysadmin"){j.push({xtype:"menuseparator"},{text:"Create New Site",cls:"userBar_managesites",iconCls:"createsitesIcon",scope:k,handler:function(){helpiq.app.getMainTab().fireEvent("newsite")}},{text:"Manage Sites",cls:"userBar_managesites",iconCls:"managesitesIcon",scope:k,handler:k.manageSites.createDelegate(k)})}d.menu.addClass("switch_projects");d.menu.removeAll();d.menu.add(j);d.show();l.show()},refreshLangs:function(e){if(!Ext.isEmpty(e)){this.langs=e}var m=helpiq.app.getUserBar(),a=m.getBottomToolbar(),c=a.items.item(m.btnLangsId),p=c.nextSibling(),k=[],o={},e=this.langs,d=e.active,h=e.index,j=e.list,n,l,b;if(true==d){for(var f=0,g=j.length;f<g;f++){n=j[f]["lang"];iconCls=j[f]["iconCls"];b=j[f]["url"];o={text:n,checked:f==h,group:"lang",scope:m,handleClick:m.switchLang.createDelegate(m,[b])};k.push(o);if(h==f){c.setText(n)}}c.menu.removeAll();c.menu.add(k);c.show();p.show()}else{c.hide();p.hide()}},getLangPath:function(){var b="",a=this.data.primary_id,c=!Ext.isEmpty(a)&&"0"!=a;if(c){b=this.data.lang}return b},getLang:function(){var a=helpiq.user.getLang?helpiq.user.getLang():this.data.lang;if("as_site"==a){a=this.data.lang}return a},getDisqusShortname:function(){return this.params.disqus_shortname},get_google_tran_code:function(){return this.params.google_tran_code}});Ext.ns("helpiq");helpiq.User=Ext.extend(Object,{loggedin:false,params:{},logoutUrl:"/user/auth/logout",checkSession:function(a){helpiq.get({scope:this,success:function(b){this.loggedin=b.loggedin;a.success.call(a.scope||this)}},"user/auth/check_session")},isAuthenticated:function(){return this.loggedin},load:function(a){helpiq.get({scope:this,success:function(b){this.params=b.user_params;this.initPO(this.params,"getParam");helpiq.project.initialize(b);helpiq.appMgr.init();a.success.call(a.scope||this)}},"user/auth/load")},initPO:Ext.emptyFn,getUserId:function(){return this.params.user_id},login:function(){location.href=helpiq.project.getSiteAddress()+"login/"},logout:function(){helpiq.get({scope:this,success:function(a){location.href=helpiq.project.getProjectAddress()}},"user/auth/logout")},reload:function(a){this.load(a)}});Ext.ns("helpiq");helpiq.Permission=Ext.extend(Object,{components:[],LinkToCategory:0,init:function(b,a){this.components=b;this.LinkToCategory=a},getComponents:function(c,b,a){var d=[];Ext.each(this.components,function(e){if(c==e.cmp_module){if(!Ext.isArray(b)){if(b==e.cmp_index){d.push(e)}}else{if(b.indexOf(e.cmp_index)>-1){d.push(e)}}}},this);if(a&&a.success){a.success.call(a.scope||this,{objs:d})}return d},getComponentItems:function(d,l,f){var c=this.getComponents(d,l),j,r,m=[],e,n,b,q,o,g=f.fn,p=f.group,a={};var k=c.length;if(f.scope){g=(g&&f.scope[g])?f.scope[g]:f.scope.processEvent}for(var h=0;h<k;h++){r=c[h];e=r.obj_index;n=e.split("_");if(n[1]&&"menuseparator"==n[1]){o={xtype:n[1],actionIndex:e,group:r.cmp_index};m.push(o);continue}b=e.replace("_","");q=e.replace("_","-");o={iconCls:"icon_userbar_"+e,cls:"ux-spacebar",text:f.langIndex[e.replace("-","_")],scope:this,actionIndex:e,group:r.cmp_index,handler:g.createDelegate(f.scope,[b])};if(1==r.icon){o.iconCls="icon-"+q+(f.iconSufix||"")}if("add_new"==r.cmp_index){o.cls="new-custom-addmenu"}if("view_all"==r.cmp_index){o.cls="new-custompreview-addmenu"}j=r.hidden||false;if(("new_topic"==e||"group_new-topic"==e)&&!helpiq.restraint.hasMoreTopic()){j=false}if("new_tooltip"==e&&!helpiq.restraint.hasMoreStorage()){j=true}o.hidden=j;o.cmdType=r.cmd_type;if("switch_projects"==e){o.id=f.scope.btnSwitchId;o.menu={items:[]}}if("remove"==e||"embed"==e||"revisions"==e||"workFlow"==e){o.cls="ux-spacebar";delete o.iconCls}if("remove"==e){o.cls="ux-space-noborder"}if(p){m=a[r.cmp_index]||[]}if(f.hasSeparator&&h!=k-1){m.push({group:r.cmp_index,xtype:"tbseparator"})}m.push(o);if(p){a[r.cmp_index]=m}}if(p){a.len=k}return p?a:m}});helpiq.SearchSuggestion=Ext.extend(Ext.form.ComboBox,{typeAhead:false,displayField:"text",minChars:2,itemSelector:"div.ui-sesg-item",listClass:"ui-search-sgmenu",queryParam:"keyword",syncFont:false,listWidth:300,maxHeight:900,mode:"remote",hideTrigger:true,cls:"icon-search ui-se-txt",loadingCls:"ui-se-loading",emptyText:helpiq.i18.basic.search,hMaxWidth:300,hMinWidth:200,isFormField:false,autoSelect:false,initComponent:function(){this.store=new helpiq.data.ReadOnlyStore({cmd:"search/quick_panel_se",method:"GET",fields:["id","text","permalink","iconCls"]});this.tpl=new Ext.XTemplate('<tpl for="."><div class="ui-sesg-item"><div class="ui-sesg-item-inner {iconCls}">{text}</div></div></tpl>');helpiq.SearchSuggestion.superclass.initComponent.call(this)},initList:function(){helpiq.SearchSuggestion.superclass.initList.call(this);this.mon(this.innerList,"mouseout",this.onViewOut,this)},onViewOut:function(){this.selectedIndex=-1;this.view.clearSelections()},onRender:function(b,a){helpiq.SearchSuggestion.superclass.onRender.call(this,b,a);this.wrap.dom.removeAttribute("style");this.positionEl=this.wrap;this.resizeEl=this.el},onSelect:function(b){helpiq.util.History.add(b.get("permalink"));this.collapse();var a=function(){this.selectedIndex=-1;this.view.clearSelections();if(b.get("id")==9999){this.onSearch()}};a.defer(200,this)},onBeforeLoad:function(){this.collapse();this.el.addClass(this.loadingCls)},expand:function(){var a=this.store.getCount();if(a<=0){return}helpiq.SearchSuggestion.superclass.expand.call(this)},onBlur:function(){this.el.setWidth(this.hMinWidth,true)},onFocus:function(){helpiq.SearchSuggestion.superclass.onFocus.call(this);this.el.setWidth(this.hMaxWidth,true)},updateEditState:Ext.emptyFn,onResize:function(a){this.wrap.dom.removeAttribute("style");if(Ext.isNumber(a)){this.el.setWidth(a)}},restrictHeight:function(){helpiq.SearchSuggestion.superclass.restrictHeight.call(this);var a=this.list.getHeight();this.innerList.setHeight(a)},getCleanValue:function(){var a=this.getRawValue();a=a.replaceAll("</","");a=a.replaceAll("/>","");a=a.replaceAll("<","");a=a.replaceAll(">","");a=Ext.util.Format.trim(a);return a},onSearch:function(){var a=this.getCleanValue();this.setRawValue(a);if(a.length<1){return}Ext.Ajax.abort();this.el.removeClass(this.loadingCls);this.collapse();this.dqTask.cancel();this.fireEvent("search",this,a)},onTriggerClick:function(){this.onSearch()},onKeyUp:function(c){var b=c.getKey(),a=this.getCleanValue();if(b==c.ENTER&&-1==this.selectedIndex){this.dqTask.cancel();this.onSearch()}else{if(a.length<this.minChars){this.collapse()}else{helpiq.SearchSuggestion.superclass.onKeyUp.call(this,c)}}},onLoad:function(){helpiq.SearchSuggestion.superclass.onLoad.call(this);this.el.removeClass(this.loadingCls)},initEvents:function(){helpiq.SearchSuggestion.superclass.initEvents.call(this);this.queryDelay=70}});Ext.ns("helpiq");helpiq.SearchField=Ext.extend(Ext.form.TwinTriggerField,{validationEvent:false,validateOnBlur:false,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",hideTrigger1:true,width:180,hasSearch:false,paramName:"query",maskRe:/[^<^>^]/,isFormField:false,initComponent:function(){helpiq.SearchField.superclass.initComponent.call(this);this.on("specialkey",function(a,b){if(b.getKey()==b.ENTER){this.onTrigger2Click()}},this);this.addEvents("search","query")},onTrigger1Click:function(){if(this.hasSearch){this.el.dom.value="";this.triggers[0].hide();this.hasSearch=false;this.focus()}this.fireEvent("query",this,"")},getCleanValue:function(){var a=this.getRawValue();a=a.replaceAll("</","");a=a.replaceAll("/>","");a=a.replaceAll("<","");a=a.replaceAll(">","");a=Ext.util.Format.trim(a);return a},onTrigger2Click:function(){var a=this.getCleanValue();this.setRawValue(a);if(a.length<1){this.onTrigger1Click();return}this.hasSearch=true;this.triggers[0].show();this.fireEvent("search",this,a);this.fireEvent("query",this,a)}});Ext.ns("helpiq");helpiq.UserBar=Ext.extend(Ext.Panel,{headerCssId:"site-header-css",siteCssId:"custom-site-css",headerScriptId:"site-header-script",btnSwitchId:"btn-switch-projects",bbarHeight:30,defaultHeight:45,currentHeight:0,btnLangsId:"btn-switch-langs",pageToolId:"helpiq-page-tools",transId:"google_translate_element",transLoaded:false,varmyaccount:"",constructor:function(a){this.currentHeight=helpiq.api.project.HEADER_CUSTOM==helpiq.project.getHeaderType()?helpiq.project.getHeaderHeight():helpiq.project.getDefaultHeight();this.height=this.currentHeight+this.bbarHeight;helpiq.UserBar.superclass.constructor.call(this,a)},initComponent:function(){this.tpl=new Ext.XTemplate('<div id="logo"><div class="colpadding">','<tpl if="logo">','<a href="/{home_url}" class="ui-hiq-page"><img alt="{name}" src="{logo}"/></a>',"</tpl>","</div></div>",'<div id="top-nav" style="height:{height}px; line-height:{height}px">','<tpl if="log_link">','<a href="{url}" style="color:#{color}" class="{[values.loggedin ? "log-out" : "log-in"]}">','{[values.loggedin ? values["log_out"] : values["log_in"]]}',"</a>","</tpl>","</li>","</div>");this.data={logo:"",name:"",log_out:helpiq.i18.userbar.logout,log_in:helpiq.i18.userbar.login,loggedin:helpiq.user.isAuthenticated(),log_link:false};this.bbar={height:this.bbarHeight,layout:"header.fit"};helpiq.UserBar.superclass.initComponent.call(this);this.addEvents("newtopic","newfolder","alltopics","allrulesets","tooltips","search","savepdf","saveall_pdf")},afterRender:function(){helpiq.UserBar.superclass.afterRender.call(this);this.loadButtons();this.loadSiteHeader();var a=helpiq.project.getHeaderScript();if(a){this.addHeaderScript(a)}this.loadSiteCss(helpiq.project.getSiteCss());this.body.on("click",this.clickHandler,this);if(helpiq.user.isAuthenticated()){Ext.getBody().insertHtml("afterBegin","<div class='top-arrow head-hide' id='headHideArrow'></div>")}if(helpiq.user.isAuthenticated()){if(this.currentHeight==0){Ext.getBody().select("#headHideArrow").elements[0].className="top-arrow"}}if(helpiq.user.isAuthenticated()){var b=helpiq.app.getMainTab();this.mon(Ext.getBody().select("#headHideArrow"),"click",function(){b.headerShowHide(this)},this)}},clickHandler:function(d,a){var b=d.getTarget("a.ui-hiq-page");if(b){d.stopEvent();var c=b.href;c=c.replace(helpiq.project.getProjectAddress(),"");helpiq.util.History.add(c)}b=d.getTarget("a[rel^=supportlightbox]");if(b){d.stopEvent();if(helpiq.TicketTab){helpiq.TicketTab.openTab(d)}return false}},loadSiteCss:function(a){Ext.util.CSS.removeStyleSheet(this.siteCssId);Ext.util.CSS.createStyleSheet(a,this.siteCssId)},loadSiteHeader:function(){var b=helpiq.project;var a={headerType:b.getHeaderType(),logo:b.getLogo(),name:b.getName(),textColor:b.getTextColor(),backgroundColor:b.getBackgroundColor(),backgroundImage:b.getBackgroundImage(),backgroundRepeat:b.getBackgroundRepeat(),cssCode:b.getHeaderCSS(),htmlCode:b.getHeaderHTML(),headerHeight:b.getHeaderHeight(),defaultHeight:b.getDefaultHeight(),logoPath:b.getProjectPath(),backgroundPath:b.getProjectPath(),logLink:b.getLogLink()};this.updateSiteHeader(a)},updateSiteHeader:function(e){this.body.removeClass("x-panel-body");Ext.util.CSS.removeStyleSheet(this.headerCssId);var h=helpiq.project,c=h.getParam("login_url");var k=this.currentHeight,a,j=helpiq.project.getTopic();if(helpiq.user.isAuthenticated()){c=helpiq.user.logoutUrl}if(helpiq.api.project.HEADER_DEFAULT==e.headerType){a=e.defaultHeight;var f={logo:e.logo?e.logoPath+e.logo:"",name:e.name,log_out:helpiq.i18.userbar.logout,log_in:helpiq.i18.userbar.login,loggedin:helpiq.user.isAuthenticated(),color:e.textColor,home_url:j.permalink,url:c,log_link:e.logLink,height:a};this.update(f);var b={"background-repeat":e.backgroundRepeat,"background-color":e.backgroundColor?("#"+e.backgroundColor):"none","background-image":e.backgroundImage?('url("'+e.backgroundPath+e.backgroundImage+'")'):"none",color:"#"+e.textColor};this.body.setStyle(b);this.body.addClass("header-body")}else{this.body.removeClass("header-body");this.body.addClass("custom-header-body");this.body.dom.removeAttribute("style");if(!Ext.isEmpty(e.cssCode)){Ext.util.CSS.createStyleSheet(e.cssCode,this.headerCssId)}var g=e.htmlCode||"",d;if(!Ext.isEmpty(g)){if(helpiq.user.isAuthenticated()){d='<a href="'+c+'" class="log-out">'+helpiq.i18.userbar.logout+"</a>"}else{d='<a href="'+c+'" class="log-in">'+helpiq.i18.userbar.login+"</a>"}g=g.replace("{login}",d);g=g.replace("{home_url}","#"+j.permalink);this.updateHtml(g)}else{this.body.update("")}a=e.headerHeight}if(h.getExtraHeaderHtml){var i=Ext.get("ui-pp-banner");if(i){i.remove()}Ext.getBody().insertHtml("afterBegin",h.getExtraHeaderHtml())}this.resizeHeight.defer(50,this,[k,a])},updateHtml:function(a){this.body.update(a)},addHeaderScript:function(a){Ext.util.CSS.removeStyleSheet(this.headerScriptId);helpiq.util.Scripts.addContent(a,this.headerScriptId)},resizeHeight:function(i,a){var d=a-i,c,f,g=helpiq.app.getNavigator(),e=helpiq.app.getMainTab();if(!e.rendered){return}headerHeight=a+this.bbarHeight;this.body.setHeight(a);c=g.getHeight()-d;g.setHeight(c);e.setHeight(c);g.el.setStyle("top",headerHeight+"px");e.el.setStyle("top",headerHeight+"px");this.currentHeight=a;if(this.body.hasClass("header-body")){var b=this.body.select("#top-nav");if(b){b.applyStyles({height:a+"px","line-height":a+"px"})}}this.ownerCt.doLayout()},switchProject:function(a){location.href=helpiq.SWITCH_PROJECT_URL+"?project="+a.site_address},manageSites:function(){var a=helpiq.app.getMainTab();a.showAdmin();a.activeTab.changeView("sites")},loadButtons:function(){var b=this.getBottomToolbar();var a=helpiq.permission.getComponentItems("userbar","tbar",{scope:this,langIndex:helpiq.i18.userbar,hasSeparator:true});b.add(a);this.addSideButtons();helpiq.project.refreshList()},processEvent:function(a){this.fireEvent(a)},addSideButtons:function(){bbar=this.getBottomToolbar();this.addsharebutton(bbar);this.addViewButtons(bbar);this.addSearchBar(bbar);bbar.doLayout()},addSearchBar:function(a){var b=function(c){this.fireEvent("search",c)};this.seField=helpiq.appMgr.addSearchField(a,false,this,b,"search",true,true)},addViewButtons:function(a){var g=helpiq.app.getMainTab();var c=a.items.length,d=helpiq.i18.userbar,h,e;g.tabSwitcher=new Ext.menu.Menu({defaultAlign:"br-tr?",cls:"ui-tab-switcher",items:["-",{text:d.close_all_tabs,cls:"tab-switcher-btn",scope:g,handler:function(){this.closeAll()}}]});var l=['<div id="'+this.transId+'"></div>',"->"];l.push([{text:"English",menu:{cls:"ui-flag-menu",items:[]},id:this.btnLangsId,hidden:true},{xtype:"",id:"tb_space",hidden:true}]);var j=helpiq.project.getDefaultView(),k=helpiq.project.isAllowUserView(),b=helpiq.project.isAllowDocxTool(),f=helpiq.project.getViewMode();var i=[{iconCls:"icon-print-topic",text:d.print_page,scope:g,actionIndex:"printpage",href:"javascript:;",handler:g.onPrint}];if(f=="view"){i.push([{iconCls:"icon-url-topic",text:d.page_links,scope:g,handler:function(){var n=this.getActiveItem();this.showLinks(n.viewData)}}])}if(b){i.push([{iconCls:"icon-url-word",text:"Save page as doc.",scope:g,actionIndex:"save_doc",href:"javascript:;",handler:g.saveDocxFile}])}if(k){i.push(["-",{text:d.tab_view,iconCls:"icon-tab-view",hidden:"tab"==j,group:"view-opt",scope:this,handleClick:this.changeView.createDelegate(this,["tab"])},{text:d.basic_view,hidden:"tab"!=j,iconCls:"icon-basic-view",group:"view-opt",scope:this,handleClick:this.changeView.createDelegate(this,["basic"])}])}i=this.checkAuthTools(i);if(f!=="view"){i.push(["-",{text:helpiq.i18.userbar.edit_profile,iconCls:"icon_edit_profile",scope:this,handler:this.varmyaccount}]);i.push([{text:helpiq.i18.userbar.log_out,iconCls:"icon-log_out",scope:this,handler:function(){window.location.href=helpiq.user.logoutUrl}}])}l.push([{iconCls:"icon-page_tools_but",id:this.pageToolId,menu:i}]);a.add(l);e={text:d.view,menu:[{text:d.tab_view,checked:"tab"==j,group:"view-opt",scope:this,handleClick:this.changeView.createDelegate(this,["tab"])},{text:d.basic_view,checked:"tab"!=j,group:"view-opt",scope:this,handleClick:this.changeView.createDelegate(this,["basic"])}]};var m={xtype:"tbseparator"};if(!k){e.hidden=true;m.hidden=true}e={iconCls:"icon-tab-topic",destroyMenu:false,menu:g.tabSwitcher};if("tab"!=j){e.hidden=true}a.add(e);h=a.items.length;g.initViewButtons(a,c+1,h+1);a.doLayout();this.checkTranslate();helpiq.project.refreshLangs()},addsharebutton:function(a){var k=helpiq.user.isAuthenticated();var g=helpiq.project.getSharing();if((!k)&&(g)){if(!a){a=this.getBottomToolbar()}var h=helpiq.app.getMainTab();var b=a.items.length,c=helpiq.i18.userbar,i,d;var f=[{iconCls:"icon-facebook-share",scope:h,cls:"share_me",href:"javascript:;",html:"",handler:function(){var l=this.getActiveItem();this.onFbshare(l.viewData)}}];var j=[{iconCls:"icon-google-share",scope:h,cls:"share_me",href:"javascript:;",html:"",handler:function(){var l=this.getActiveItem();this.onglshare(l.viewData)}}];var e=[{iconCls:"icon-tweet-share",scope:h,cls:"share_me",href:"javascript:;",html:"",handler:function(){var l=this.getActiveItem();this.ontwshare(l.viewData)}}];a.add(f);a.add(e);a.add(j)}},checkTranslate:function(){if(helpiq.project.getParam("gg_trans_status")){var a=helpiq.project.getParam("gg_trans_url");Ext.Loader.load([a])}},initTranslate:function(){var a=helpiq.project.get_google_tran_code();console.log(a);if(!this.transLoaded&&typeof google!=="undefined"&&typeof google.translate!=="undefined"&&typeof google.translate.TranslateElement!=="undefined"){new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:(a.indexOf(",")>=0)?a:"",layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element");this.transLoaded=true}},checkAuthTools:function(b){var a=helpiq.permission.getComponentItems("userbar","tools",{scope:this,langIndex:helpiq.i18.userbar});Ext.each(a,function(c){if("my_account"==c.actionIndex){this.varmyaccount=c.handler;c.hidden=true}b.push(c)},this);return b},changeView:function(a){location.href=helpiq.CHANGE_VIEW_URL+a},switchLang:function(a){location.href=a},beforeDestroy:function(){if(this.seField){Ext.destroy(this.seField)}helpiq.UserBar.superclass.beforeDestroy.apply(this)}});helpiq.UserBar.FitLayout=Ext.extend(Ext.layout.ToolbarLayout,{tableHTML:['<div class="x-toolbar-ct">','<div class="x-toolbar-left-row">',"</div>",'<div class="x-toolbar-right-row">',"</div>",'<div class="x-toolbar-extras-row">',"</div>","</div>"].join(""),onLayout:function(e,h){if(!this.leftTr){var g=e.buttonAlign=="center"?"center":"left";h.addClass("x-toolbar-layout-ct");h.insertHtml("beforeEnd",String.format(this.tableHTML,g));this.leftTr=h.child("div.x-toolbar-left-row",true);this.rightTr=h.child("div.x-toolbar-right-row",true);this.extrasTr=h.child("div.x-toolbar-extras-row",true);if(this.hiddenItem==undefined){this.hiddenItems=[]}}var j=e.buttonAlign=="right"?this.rightTr:this.leftTr,k=e.items.items,d=0;for(var b=0,f=k.length,l;b<f;b++,d++){l=k[b];if(l.isFill){j=this.rightTr;d=-1}else{if(!l.rendered){l.render(this.insertCell(l,j,d));this.configureItem(l)}else{if(!l.xtbHidden&&!this.isValidParent(l,j.childNodes[d])){var a=this.insertCell(l,j,d);a.appendChild(l.getPositionEl().dom);l.container=Ext.get(a)}}}}this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);h.dom.removeAttribute("style")}});Ext.Container.LAYOUTS["header.fit"]=helpiq.UserBar.FitLayout;Ext.ns("helpiq");(function(){var a,c,b,d=Ext.tree.TreePanel;helpiq.TocNode=Ext.extend(Ext.tree.TreeNode,{checkTocNode:function(){if(this.isRoot){this.level=0}else{if(this.parentNode){this.level=this.parentNode.level+1}}var j=this.ui.ctNode,e=Ext.get(j);if(j&&!e.hasClass("l"+this.level)){e.addClass("l"+this.level)}var f=this.ui.elNode,g=Ext.get(f),n=this.getOwnerTree(),k=this.attributes;if(f){if(k.type){g.addClass(k.type+"-ct")}for(var h=0;h<10;h++){g.removeClass("lct-"+h)}g.addClass("lct-"+this.level);if(k.type){Ext.get(this.ui.wrap).addClass(k.type+"-node")}this.ui.SyncEcHeight()}var l=this.ui.textNode,m=Ext.get(l);if(l&&!m.hasClass("ltxt"+this.level)){m.addClass("ltxt"+this.level)}},SyncEcHeight:function(){this.ui.SyncEcHeight()},render:function(e){a.superclass.render.call(this,e);this.checkTocNode()},setText:function(e){a.superclass.setText.call(this,e);this.ui.SyncEcHeight()}});helpiq.AsyncTocNode=Ext.extend(Ext.tree.AsyncTreeNode,{render:function(e){c.superclass.render.call(this,e);a.prototype.checkTocNode.call(this)},setText:function(e){c.superclass.setText.call(this,e);this.ui.SyncEcHeight()}});helpiq.TocNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{renderElements:function(h,o,l,p){this.indentMarkup=h.parentNode?h.parentNode.ui.getChildIndent():"";var i=Ext.isBoolean(o.checked),e,f=this.getHref(o.href),g;if(HELPIQ.newToc){g=['<li class="x-tree-node"><div ext:tree-node-id="',h.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',o.cls,'" unselectable="on">','<div class="icon-inner-ct">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<span class="x-tree-ec-icon x-tree-elbow"><i></i></span>','<span alt="" class="x-tree-node-icon',(o.icon?" x-tree-node-inline-icon":""),(o.iconCls?" "+o.iconCls:""),'" unselectable="on">',"<i></i>",'</span><div class="x-clear"></div>',"</div>",'<a hidefocus="on" class="x-tree-node-anchor" href="',f,'" tabIndex="1" ',o.hrefTarget?' target="'+o.hrefTarget+'"':"",'><span unselectable="on">',h.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("")}else{g=['<li class="x-tree-node"><div ext:tree-node-id="',h.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',o.cls,'" unselectable="on">','<div class="icon-inner-ct">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',o.icon||this.emptyIcon,'" class="x-tree-node-icon',(o.icon?" x-tree-node-inline-icon":""),(o.iconCls?" "+o.iconCls:""),'" unselectable="on" />',"</div>",'<a hidefocus="on" class="x-tree-node-anchor" href="',f,'" tabIndex="1" ',o.hrefTarget?' target="'+o.hrefTarget+'"':"",'><span unselectable="on">',h.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("")}if(p!==true&&h.nextSibling&&(e=h.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",e,g)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",l,g)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var m=this.elNode.childNodes,j=m[0],k=j.childNodes;this.indentNode=k[0];this.ecNode=k[1];this.iconNode=k[2];this.cstNode=j;this.anchor=m[1];this.textNode=m[1].firstChild;if(o.nodeCls){Ext.get(this.wrap).addClass(o.nodeCls)}},SyncEcHeight:function(){if(!this.rendered){return}var h=Ext.get(this.elNode),f=Ext.get(this.anchor),g=h.getStyle("padding-left"),e=Ext.get(this.cstNode).getWidth();g=g.replace("px","");if(f.getX()==h.getX()+parseInt(g)){Ext.get(this.cstNode).setHeight(f.getHeight()+1)}}});a=helpiq.TocNode;c=helpiq.AsyncTocNode;b=helpiq.TocNodeUI;d.nodeTypes.TocNode=helpiq.TocNode;d.nodeTypes.AsyncTocNode=helpiq.AsyncTocNode})();Ext.ns("helpiq");helpiq.DocsTree=Ext.extend(Ext.tree.TreePanel,{xtype:"toctree",initComponent:function(){this.filter=new helpiq.DocsTreeFilter(this,{clearBlank:false,autoClear:true});this.initAuthComponents();helpiq.DocsTree.superclass.initComponent.call(this)},createClasses:function(){helpiq.DocsTree.superclass.createClasses.call(this);this.bodyCls="ui-toc-tree-body"},afterRender:function(){helpiq.DocsTree.superclass.afterRender.call(this);this.initAuthEvents()},setAutoScroll:function(a){this.updateScroll(a)},updateScroll:function(a){if(this.rendered){this.getContentTarget().setOverflow(a?"auto":"hidden");this.checkWordWrap.defer(50,this)}this.autoScroll=a;return this},checkWordWrap:function(){for(var b in this.nodeHash){var a=this.nodeHash[b];if(a&&a.rendered&&a.ui&&a.ui.SyncEcHeight){a.ui.SyncEcHeight()}}},initAuthComponents:Ext.emptyFn,initAuthEvents:Ext.emptyFn,selectPathById:function(b){var a=this.getNodeById(b);if(a){this.selectPath(a.getPath())}},checkEditNode:function(a){return false}});helpiq.DocsTreeFilter=Ext.extend(Ext.tree.TreeFilter,{reset:false,expandOnFilter:true,filter:function(d,a,c){if(this.reset){return}if(false!==this.expandOnFilter){c=c||this.tree.root;var b=this.tree.animate;this.tree.animate=false;c.expand(true,false,function(){helpiq.DocsTreeFilter.superclass.filter.call(this,d,a,c)}.createDelegate(this));this.tree.animate=b}else{helpiq.DocsTreeFilter.superclass.filter.apply(this,arguments)}},filterBy:function(d,c,b){b=b||this.tree.root;if(this.autoClear){this.clear()}var a=this.filtered,i=this.reverse;var e=function(k){if(k===b){return true}if(a[k.id]){return false}var f=d.call(c||k,k);if(!f||i||k.attributes.hidden||k.attributes.home){a[k.id]=k;k.ui.hide();return true}else{k.ui.show();var j=k.parentNode;while(j&&j!==this.root){j.ui.show();j=j.parentNode}return true}return true};b.cascade(e);if(this.remove){for(var h in a){if(typeof h!="function"){var g=a[h];if(g&&g.parentNode){g.parentNode.removeChild(g)}}}}},clear:function(){var b=this.tree;var a=this.filtered;for(var d in a){if(typeof d!="function"){var c=a[d];if(c&&!c.attributes.hidden){c.ui.show()}}}this.filtered={}}});helpiq.DocsTreeLoader=Ext.extend(helpiq.data.TreeLoader,{createNode:function(a){a.nodeType=a.leaf?"TocNode":"AsyncTocNode";var b=helpiq.DocsTreeLoader.superclass.createNode.call(this,a);return b}});Ext.ns("helpiq");helpiq.DocsList=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){this.filter=new helpiq.DocsTreeFilter(this,{clearBlank:true,autoClear:true});helpiq.DocsList.superclass.initComponent.call(this)}});Ext.ns("helpiq");helpiq.Navigator=Ext.extend(Ext.TabPanel,{asOffTask:null,initComponent:function(){var c=helpiq.project,f=!c.getFilterVisible(),e=c.getTocVisible(),a=c.getIndexVisible();this.hidden=!e&&!a;this.width=c.getTocWidth();this.activeTab=(e||this.hidden)?0:1;if(HELPIQ.newToc){f=true}this.docTree=new helpiq.DocsTree({title:helpiq.i18.nav.table_content,border:false,rootVisible:false,autoScroll:true,lines:false,animate:true,useArrows:true,cls:"ui-toc-tree",duration:0.2,loader:helpiq.project.getTocLoader({listeners:{load:{fn:this.onLoadToc,scope:this}}}),root:new helpiq.AsyncTocNode({text:"help center",id:"0",expanded:true})});this.docList=new helpiq.DocsList({title:helpiq.i18.nav.index,border:false,rootVisible:false,lines:false,animate:false,autoScroll:true,cls:"ui-topic-list",loader:helpiq.project.getIndexLoader({}),hidden:a,root:new Ext.tree.AsyncTreeNode({text:"index tree",id:"0",expanded:true})});this.items=[this.docTree,this.docList];var d=helpiq.project.hasHugeData();this.filter=new Ext.form.TextField({anchor:"100%",emptyText:helpiq.i18.nav.filter,cls:"ui-nav-filter",enableKeyEvents:true,isFormField:false,listeners:{keydown:{fn:this.filterTree,buffer:350,scope:this}}});this.delbtn=new Ext.Button({text:"X",cls:"clearbtn_search no_border_btn",hide:true,id:"delbtn",scope:this,handler:function(){this.docTree.filter.clear();Ext.lib.Ajax.abort(this.docTree.loader.transId);this.docTree.filter.reset=true;this.reloadToc();this.filter.setValue("");Ext.get("delbtn").hide()}});var b=['<img class="icon-filter" alt="" src="'+Ext.BLANK_IMAGE_URL+'"/>',this.filter,this.delbtn];if(!d){b=b.concat([{iconCls:"icon-expand-all",tooltip:helpiq.i18.nav.expand_all,scope:this,group:"toc",hideParent:false,handler:function(){this.setActiveTab(0);this.docTree.getRootNode().expand(true)}},{group:"toc",xtype:"tbseparator",hideParent:false},{iconCls:"icon-collapse-all",tooltip:helpiq.i18.nav.collapse_all,scope:this,group:"toc",hideParent:false,handler:function(){this.setActiveTab(0);this.docTree.getRootNode().collapse(true)}}])}this.tbar={cls:"ui-toc-filter-bar",items:b,layout:"nav.filter",hideParent:true,hidden:f,cacheSizes:false,getResizeEl:function(){return this.el.parent()}};helpiq.Navigator.superclass.initComponent.call(this);this.addEvents("opentopic","openftopic");this.initAuthComponent()},onLoadToc:function(a,b){},onBeforeOpen:function(a){return true},afterRender:function(){this.on("tabchange",function(g,h){var f=this.items.indexOf(h),i=this.topToolbar,e="ui-side-"+(f==0?"toc":"index"),d=i.getWidth();this.el.removeClass(["ui-side-toc","ui-side-index"]);this.el.addClass(e);i.items.each(function(j){if("toc"==j.group){j[0==f?"show":"hide"]()}},this);i.setWidth(d)},this);helpiq.Navigator.superclass.afterRender.call(this);this.docTree.on("click",this.onTocClick,this);this.docList.on("click",this.onIndexClick,this);this.on("collapse",this.onCollapseNav,this);this.docTree.on("expandnode",function(){this.docTree.setAutoScroll(true)},this);this.asOffTask=new Ext.util.DelayedTask(function(){helpiq.app.getTocTree().setAutoScroll(false)});this.el.on("mouseover",function(){this.asOffTask.cancel();this.docTree.setAutoScroll(true)},this);this.el.on("mouseout",function(){this.asOffTask.delay(200)},this);this.asOffTask.delay(200);var b=helpiq.project;var c=b.getTocVisible(),a=b.getIndexVisible();this.toggleTabFooter(a);this[(c?"un":"")+"hideTabStripItem"](0);helpiq.project.applyTocCls();this.initAuthEvents();Ext.get("delbtn").hide()},onCollapseNav:function(){this.resetTransElPos(1)},resetTransElPos:function(d){var e=helpiq.app.getUserBar(),c=e.getBottomToolbar();var b=c.items.itemAt(0),a=b.el.child("#"+e.transId);if(a){a=Ext.get(a);a.setStyle("padding-left",d+"px")}},toggleTabFooter:function(a){this.footer.setDisplayed(a)},onTocClick:function(f,h){var d=f.attributes;switch(d.type){case"topic":if(this.onBeforeOpen(f)){var b={id:"ID"+f.id,permalink:d.permalink,title:d.title};this.fireEvent("opentopic",this,b)}break;case"link":if(this.onBeforeOpen(f)){var a=d.link,c=/(([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,g=c.test(a)||a.startsWith("http://")||a.startsWith("https://");if(g){if(!a.startsWith("http://")&&!a.startsWith("https://")&&!a.startsWith("ftp://")){a="http://"+a}a=a.split("$hqt");if("_self"==a[1]){location.href=a[0]}else{window.open(a[0],a[1])}}else{a=a.replace("#","$");helpiq.util.History.add(a)}}break;case"folder":if(helpiq.permission.LinkToCategory==1&&!f.attributes.appending){var b={fid:f.id.slice(2),title:f.text,editMode:false};this.fireEvent("openftopic",this,b)}break;default:break}},onIndexClick:function(d,f){f.stopEvent();var b=d.attributes;if(b.page){var g=d.id,c=g.split("_"),a={id:"ID"+c[0],permalink:b.permalink,title:b.title};this.fireEvent("opentopic",this,a)}},initAuthComponent:Ext.emptyFn,initAuthEvents:Ext.emptyFn,filterTree:function(b,d){var a=this.getActiveTab();if(this.docTree==a){if(!this.docTree.filter){return}var f=b.getValue();if(f.length>0){Ext.get("delbtn").show()}if(f.length==0){Ext.get("delbtn").hide()}var c=new RegExp(".*"+f+".*","i");this.docTree.filter.clear();if(!Ext.isEmpty(f)){this.docTree.filter.reset=false;this.docTree.filter.filter(c,"text")}else{Ext.lib.Ajax.abort(this.docTree.loader.transId);this.docTree.filter.reset=true;this.reloadToc()}}else{if(!this.docList.filter){return}var f=b.getValue();var c=new RegExp(".*"+f+".*","i");this.docList.filter.clear();if(!Ext.isEmpty(f)){this.docList.filter.reset=false;this.docList.filter.filter(c,"text")}else{Ext.lib.Ajax.abort(this.docList.loader.transId);this.docList.filter.reset=true;this.reloadIndex()}}},reloadToc:function(){var a=this.docTree.getRootNode();a.reload()},reloadIndex:function(){if(this.docList.rendered){this.docList.getRootNode().reload()}}});helpiq.Navigator.FilterLayout=Ext.extend(Ext.layout.AnchorLayout,{setContainer:function(a){var b=a.el.createChild({tag:"div",cls:"ui-side-nav-tbar"});a.el=b;helpiq.Navigator.FilterLayout.superclass.setContainer.call(this,a)},parseAnchor:function(c,e,b){if(c&&c!="none"&&c.indexOf("%")!=-1){var d=parseFloat(c.replace("%",""))*0.01;return function(a){return Math.floor(a*d)}}else{return helpiq.Navigator.FilterLayout.superclass.parseAnchor.call(this,c,e,b)}},getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a={},c=helpiq.app.getNavigator(),d=c.docTree;if(b){b=b.parent()}if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding("lr");a.height-=b.getPadding("tb")}return a},isValidParent:function(e,b){var d=e.getPositionEl();var a=b&&e.getPositionEl().dom.parentNode.parentNode==(b.dom||b);return a},adjustWidthAnchor:function(d,b){var e=helpiq.app.getNavigator(),f=e.docTree,a,c=helpiq.project.hasHugeData();a=d-((f.hidden||c)?27:86);e.resetTransElPos(d+18);return a},renderItem:function(g,e,b){var f=g.rendered;helpiq.Navigator.FilterLayout.superclass.renderItem.call(this,g,e,b);var a="ui-nf-cell";if(!f){var d=g.cellWrap||g.el;d.wrap({tag:"div",cls:a})}}});Ext.Container.LAYOUTS["nav.filter"]=helpiq.Navigator.FilterLayout;Ext.ns("helpiq");helpiq.TopicView=Ext.extend(Ext.Panel,{status:0,loaded:false,xtype:"topicview",feedbackId:0,isAutoScroll:true,notMask:false,loadApi:Ext.emptyFn,layout:"fit",viewData:{},cls:"ui-panel-wrap",initComponent:function(){if(!this.notMask){this.html=helpiq.LOAD_HTML}var c=helpiq.i18.topic;this.notfoundTpl=new Ext.XTemplate('<div class="ui-404">','<div class="ui-404-header"><h2>'+c.cannot_found_title+"</h2></div>",'<div class="ui-404-body">',"<p>"+c.cannot_found_text+"</p>","</div>",'<div class="ui-search-field-wrap"><input type="text" /></div>');this.timeoutTpl=new Ext.XTemplate('<div class="ui-timeout">','<div class="ui-timeout-header"><h2>'+c.timeout_title+"</h2></div>",'<div class="ui-timeout-body">',"<p>"+c.timeout_text+"</p>","</div>",'<div class="btn-refresh-wrap"><span class="btn-refresh"></span></div',"</div>");if(helpiq.project.getPoweredByLink){var a=["Powered by ProProfs","Powered by ProProfs Knowledgebase","Powered by ProProfs Knowledge Base Software","Create a Knowledge Base - Powered by ProProfs","Knowlege Base Software by ProProfs","Powered by ProProfs Knowledge Base","Powered by ProProfs Knowledgebase Software","Online FAQ Software - Powered by ProProfs","FAQ Software - Powered by ProProfs","Create Online FAQ - Powered by ProProfs"];var b=Math.floor(Math.random()*9)+0;this.poweredByTpl="Create your own <a target='_blank' alt='"+a[b]+"' href='http://www.proprofs.com/knowledgebase/'>Knowledge Base</a></div>"}helpiq.TopicView.superclass.initComponent.call(this)},afterRender:function(){helpiq.TopicView.superclass.afterRender.call(this);helpiq.app.hideMask();this.loadContent()},loadContent:function(){var b=this.viewData;if(!this.notMask){this.body.update(helpiq.LOAD_HTML)}Ext.getDoc().set({title:helpiq.i18.basic.loading});var c=b.params||{},d=b.id||"";d=d.replace("&","$amp$");var a={id:d,params:c,onDemand:true};Ext.apply(a,{scope:this,success:this.onLoadPage,failure:this.onErrorPage,onTimeout:this.onTimeoutPage});this.loadApi(a)},refresh:function(a){this.onLoadPage({data:a})},setPageTitle:function(a){this.pageTitle=a;this.setTitle(Ext.util.Format.ellipsis(a,28))},onLoadPage:function(f){var h=f.data,b=h.id,d,a=h.toc_sel_node;this.setPageTitle(h.title);this.setViewData(h);var g=h.permalink;if(this.bookmark){g+="$"+this.bookmark}helpiq.util.History.add(g);this.panelId="ID"+b;var l=helpiq.app.getTocTree(),j=this,e=helpiq.app.getMainTab();if(!Ext.isEmpty(f.toc_path)&&helpiq.project.getTocVisible()){l.expandPath(f.toc_path,null,function(){l.selectPathById(a);d=l.getNodeById(b);if(d&&d.SyncEcHeight){d.SyncEcHeight.defer(50,d)}if(e.checkAttributes){e.checkAttributes(j)}l.setAutoScroll(true)})}else{l.selectPathById(a);if(e.checkAttributes){e.checkAttributes(j)}}Ext.getDoc().set({title:helpiq.appMgr.htmlText(h.title)});this.loaded=true;this.onAfterLoadPage(this.viewData,f);helpiq.util.Analytics.trackPageView({permalink:h.permalink});if(f.plugins&&!Ext.isEmpty(f.plugins)){var c;Ext.each(f.plugins,function(m){c="render"+Ext.util.Format.capitalize(m);if(!this[c]){this[c]=Ext.emptyFn}},this)}if(this.ownerCt){this.ownerCt.refreshTabsController(this);this.ownerCt.selectActivePath(b)}e.toggleSearchField(this,false);this.renderTopic.defer(50,this,[this.viewData,h.content,f]);var k=helpiq.project.getDefaultView();var i=helpiq.project.getDisqusShortname();if(k=="basic"&&i!=null&&i!=""){maintab=helpiq.app.getMainTab();e.disqus_rest(b,g)}},setViewData:function(a){var b=Ext.num(a.id,0);if(!Ext.isEmpty(b)){a.id="ID"+a.id}this.viewData=a},renderTopic:function(c,b,a){this.body.update(b);helpiq.app.checkSupportTab(this,true);this.renderPoweredBy(c,this.body);this.renderdisqus(this.body);this.checkToggleBlock(this.body);this.checkSitePlugins(this.body,this.body.dom);if(this.bookmark){this.scrollToBookmark.defer(1200,this,[this.bookmark])}this.renderPlugins(a,this.body);this.layoutSearchBox();this.fCl=this.body.child(".hiq-t");if(a&&this.fCl){if(a.data.topic_cl){this.fCl.createChild({cls:"ui-page-cList-wrap",html:a.data.topic_cl})}}this.mon(this.body.select(".croco_dvid"),"click",function(i,f,j){var h=f.getAttribute("docid");var g=f.getAttribute("src");if(h==null){dvidtag=i.target.closest("a");h=dvidtag.getAttribute("docid");g=dvidtag.getAttribute("src")}this.crocodoc_viewer(h,g)},this);this.mon(this.body.select(".qck-suggestions"),"keyup",function(k){var j=this.el.child(".qck-suggestions");var h=j.getWidth();if(this.el.child(".customcls_wrap")){var g=this.el.child(".customcls_wrap")}else{var i=k.target.closest("div");var g=new Ext.Element(document.createElement("div")).appendTo(i);g.dom.className="customcls_wrap"}var f=j.getValue();Ext.Ajax.request({url:"/search/quick_panel_se/?keyword="+f,method:"POST",scope:this,success:function(e,m){var l=Ext.decode(e.responseText);if(l.data.length>0&&f.length>1){Ext.each(l.data,function(n){n.id="";n.handler=function(){helpiq.util.History.add(n.permalink)}},this);SearchSuggest=new Ext.menu.Menu({items:[l.data],width:h,cls:"usearch_suggestions",focus:function(){}});SearchSuggest.showAt(g.getXY())}else{if(typeof SearchSuggest!="undefined"){SearchSuggest.hide()}}}})},this);var d=helpiq.project.isRestrictCopy();if(d){this.body.on("contextmenu",Ext.emptyFn,null,{preventDefault:true});this.body.on("copy",Ext.emptyFn,null,{preventDefault:true});this.body.setStyle({"-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"})}},crocodoc_viewer:function(c,a){var b=new Ext.Window({width:1040,draggable:true,height:620,closable:true,frame:true,border:false,autoLoad:{url:"/crocodoc/load_form/?dvid="+c+"&dwnSrc="+encodeURI(a)},close:function(){Ext.get(document.body).unmask();b.destroy()}});Ext.get(document.body).mask();b.show()},renderPlugins:function(b,c){if(b&&b.plugins&&!Ext.isEmpty(b.plugins)){var a;Ext.each(b.plugins,function(d){a="render"+Ext.util.Format.capitalize(d);if(this[a]){this[a](b,c)}},this)}},layoutSearchBox:function(){var b=this.body.child(".searchInput");if(!b){b=this.body.child("input.searchbox")}if(b){var a=b.next("input.searchButton");if(!a){a=b.next('input[type="submit"]')}else{a.dom.removeAttribute("onclick")}if(a){a.on("click",function(){this.doSearch()},this)}b.on("keyup",function(c){if(c.keyCode==c.ENTER){this.doSearch()}},this)}},doSearch:function(){var b=this.body.child(".searchInput");if(!b){b=this.body.child("input.searchbox")}if(b){var c=helpiq.app.getUserBar(),a=b.getValue();if(!Ext.isEmpty(a)){c.fireEvent("search",a)}}},checkToggleBlock:function(b){var a=b.query(".toggle-content");if(a){Ext.each(a,function(c){var e=c.getAttribute("href");var d="#"+e.replace("#","");d=Ext.DomQuery.selectNode("#"+b.id+" "+d);if(d){d.style.display="none"}},this)}},scrollToBookmark:function(c){var a=this.body.child("#"+c+", [name="+c+"]");if(a){var b=(Ext.fly(a).getOffsetsTo(this.body)[1])+this.body.dom.scrollTop;this.body.scrollTo("top",b-25,{duration:1});helpiq.util.History.add(this.viewData.permalink+"$"+c)}},onErrorPage:function(a){Ext.getDoc().set({title:"404-"+helpiq.i18.topic.cannot_found_title});if(a){this.viewData={permalink:a.permalink,id:a.id};this.panelId=a.id}this.setTitle(helpiq.i18.topic.not_found_title);this.notfoundTpl.overwrite(this.body);var b=new helpiq.SearchField({width:450});b.on("search",function(g,f){helpiq.app.getMainTab().fireEvent("search",f)},this);b.applyToMarkup(this.body.select("input").first());b.focus();this.ownerCt.refreshTabsController(this);var e=a.id.indexOf("?search="),d=helpiq.app.getMainTab();if(e!==-1){d.remove(d.getActiveTab());var c=a.id.replace("?search=","");helpiq.app.getMainTab().fireEvent("search",c)}},onTimeoutPage:function(a){Ext.getDoc().set({title:helpiq.i18.topic.timeout_title});this.setTitle(helpiq.i18.topic.timeout_title);this.timeoutTpl.overwrite(this.body);var b=new Ext.Button({text:helpiq.i18.basic.refresh,width:70});b.on("click",function(){this.loadContent()},this);b.applyToMarkup(this.body.select(".btn-refresh").first());this.ownerCt.refreshTabsController(this)},setTitle:function(a){a=Ext.util.Format.ellipsis(a,28);helpiq.TopicView.superclass.setTitle.call(this,a)},checkSitePlugins:function(ExtEl,el){eval(helpiq.project.getCustomScript())},renderPoweredBy:function(){if(helpiq.project.getPoweredByLink){var a=this.body.child(".hiq-page-wrap");this.pbEl=a.createChild({cls:"ui-poweredby-kb",html:this.poweredByTpl})}},renderdisqus:function(){var b=helpiq.project.getDisqusShortname();if(b){var a=this.body.child(".hiq-t-wrap");this.dqEl=a.createChild({id:"disqus_thread",html:""})}},onAfterLoadPage:Ext.emptyFn});Ext.reg("topicview",helpiq.TopicView);helpiq.pageOverride=function(a){Ext.override(helpiq.TopicView,a);var c=helpiq.app.getMainTab(),b=c.getActiveItem();if(b){Ext.apply(b,a)}};Ext.ux.Printer.PageRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(a){var b=a.body.child(".hiq-t-wrap:first").dom.innerHTML;return String.format("<div class='ui-topic-panel-body'>{0}</div>",b)}});Ext.ux.Printer.registerRenderer("topicview",Ext.ux.Printer.PageRenderer);Ext.ns("helpiq");helpiq.SearchPanel=Ext.extend(Ext.Panel,{keyword:null,isSearch:true,xtype:"searchpanel",tplHtml:null,seBodyEl:null,seBtn:null,seTxt:null,advBtn:null,reset:null,advtxt:null,extraTags:"div[widget=checkbox]",initComponent:function(){this.title=this.getKeywordTitle(this.keyword);this.project=helpiq.project;this.newProjectList=this.project.new_site_list;var b=this.project.getProjectId();var c="";var a="&nbsp;";if(this.newProjectList.length>1){Ext.each(this.newProjectList,function(d){if(d.prj_id!=b){c+='<div style="width:100%; float:left; margin-bottom:8px"><input type="checkbox" class="multi-site" id="project_'+d.prj_id+'" name="search-project-id[]" value="'+d.prj_id+'"><label for="project_'+d.prj_id+'" class="search_site">'+d.prj_name+"</label></div>"}},this);a='<div class="ux-search-div"><label for="project-list" class"ui-sf-label"> Include search results from these Help Sites: </label><div style=" float:left; width:70%">'+c+"</div></div>"}this.tplHtml='<div class="ui-search"><div class="ui-search-form"><div class="ui-search-txt"><input type="text"/></div><div class="ui-search-btn"><button></button></div><div style=" top: 8px; position: relative; left: 30px; float: left; cursor:pointer;"><a style="color:#3b5998; href="javascript:;" class="adv">Advanced</a></div></div><div class="text-box adv_search"><div class="ux-search-div"><a href="javascript:;" class="back" style="color:#3b5998;"> Back to main search</a></div><div class="ux-search-div"><label for="search_inc" class"ui-sf-label"> Search Includes: </label> <input style="border: 1px solid #b2afaf; padding-left:5px; width:44%; height: 32px;" type="text" class="search_inc" id="search_inc"><span style="margin:10px;"><select class="word"><option value="all">All words</option> <option value="exact">Exact Phrase</option> </select> </span></div><div class="ux-search-div"><label for="not_inc"> Does Not Include: </label> <input style="padding-left: 5px; border: 1px solid #b2afaf; width:44.2%; margin-left:1px; height: 30px;" type="text" class="not_inc" id="not_inc"></div><div class="ux-search-div"><label for="sort" class"ui-sf-label"> Sort by: </label><select class="sort" id="sort" style="width:51%;"><option value="rel">Relevance</option> <option value="d_update">Last modified</option> <option value="a_update"> Created date</option> </select></div>'+a+'<div class="ux-search-div"><a><div class="search-button search"> Search </div></a><span style="float: left;position: relative;top: 10px;left: 22px;"><a style="color:#3b5998;" class="reset" href="javascript:;">Reset</a></span></div></div><div style="margin-top: 35px; float:left;" class="ui-search-body"></div><input type="hidden" class="check" value="0" ></div>';helpiq.SearchPanel.superclass.initComponent.call(this);this.on("render",function(){var d=this.keyword;this.keyword=null;this.doSearch(d)},this,{delay:10})},afterRender:function(){helpiq.SearchPanel.superclass.afterRender.call(this);this.body.on("click",this.clickHandler,this)},clickHandler:function(f,j){var g=f.getTarget("a.se-link");if(g){f.stopEvent();g=Ext.get(g);var a=g.getAttribute("href");if(a){a=a.replace(helpiq.project.getProjectAddress(),"")}if("/"==a.substring(0,1)){a=a.substring(1)}helpiq.util.History.add(a)}var i=f.getTarget("a.adv");if(i){this.showhide();var c=this.body.child(".ui-search-body",false);c.dom.style.marginTop="40px"}var h=f.getTarget("a.back");if(h){this.back();var c=this.body.child(".ui-search-body",false);c.dom.style.marginTop="35px"}var b=f.getTarget("div.search");if(b){this.searchKeyword()}var d=f.getTarget("a.reset");if(d){this.reset()}},showhide:function(){var b=this.body.child(".text-box",false).dom;b.style.display="block";var b=this.body.child(".ui-search-body",false).dom;b.style.display="none";var b=this.body.child(".ui-search-form",false).dom;b.style.display="none";var a=this.body.child(".check",false).dom;a.value="1"},reset:function(){var b=this.body.child(".search_inc",false).dom;b.value="";var d=this.body.child(".word",false).dom;d.value="all";var a=this.body.child(".sort",false).dom;a.value="rel";var c=this.body.child(".not_inc",false).dom;c.value=""},back:function(){var b=this.body.child(".text-box",false).dom;b.style.display="none";var b=this.body.child(".ui-search-body",false).dom;b.style.display="block";var b=this.body.child(".ui-search-form",false).dom;b.style.display="block";var a=this.body.child(".check",false).dom;a.value="0"},getKeywordTitle:function(b){b=b.replace(/-/gi," ");var a=Ext.util.Format.ellipsis(b,20);var a=helpiq.i18.basic.search+': "'+a+'"';return a},onTypeKey:function(a){if(a.getKey()==a.ENTER){this.searchKeyword()}},searchKeyword:function(){var c=this.body.child(".check",false);value=c.dom.value;if(value=="1"){var g=this.body.child(".sort",false);var b=this.body.child(".word",false);var d=this.body.child(".not_inc",false);var f=document.getElementsByName("search-project-id[]");var m="";for(var h=0,e=f.length;h<e;h++){if(f[h].checked){m+=","+f[h].value}}if(m){m=m.substring(1)}var k=g.dom.value;var o=b.dom.value;var a=d.dom.value;var q=m;var p=this.body.child(".search_inc",false);var j=Ext.util.Format.trim(p.dom.value);this.seTxt.dom.value=j;j=j+"|sort="+k+"|type="+o+"|not="+a}else{if(value=="0"){a=k=o="";var j=Ext.util.Format.trim(this.seTxt.dom.value);var p=this.body.child(".search_inc",false);p.dom.value=j}}if(!Ext.isEmpty(j)){var n=helpiq.app.getUserBar();n.seField.setValue("");this.doSearch(j,k,o,a,q)}},doSearch:function(e,f,g,a,h){var i=Ext.util.Format,d=i.lowercase(e),c=i.lowercase(this.keyword);if(d==c){return}this.keyword=e;if(!this.seBodyEl){this.body.update(this.tplHtml);this.seBodyEl=this.body.child(".ui-search-body",false);this.seTxt=this.body.child(".ui-search-txt input",false);this.seBtn=this.body.child(".ui-search-btn button",false);this.advtxt=this.body.child(".search_inc",false);this.advtxt.dom.value=e;var b=this.body.child(".check",false).dom.value;if(b=="1"){this.mon(this.advtxt,Ext.EventManager.getKeyEvent(),this.onTypeKey,this)}else{this.mon(this.seTxt,Ext.EventManager.getKeyEvent(),this.onTypeKey,this)}this.mon(this.seBtn,"click",this.searchKeyword,this)}helpiq.Msg.showMask(this.body,"&#160;");helpiq.api.search({keyword:e,sort:f,type:g,not:a,projectlist:h,scope:this,success:function(k){helpiq.Msg.hideMask(this.body);var l=0,p=helpiq.i18.search,n=helpiq.app.getMainTab();if(k.count){l=k.count}var m={permalink:k.permalink,search:this.keyword};var o=k.title;this.setTitle(o);this.viewData={permalink:k.permalink,isSearch:true};var j=new Array();j=this.keyword.split("|");this.seTxt.dom.value=j[0];if(l>0){this.seBodyEl.update(k.page);if(k.permalink.indexOf("-")=="-1"){helpiq.util.History.add(n.searchPrefix+k.permalink)}}else{this.onSearchError(m)}if(helpiq.util.Analytics&&k.track_url){helpiq.util.Analytics.trackPageView({permalink:k.track_url})}Ext.getDoc().set({title:k.page_title});helpiq.app.checkSupportTab();this.seBodyEl.dom.style.display="block"},failure:function(j){Ext.getDoc().set({title:this.title});var k={search:this.keyword};this.onSearchError(k)}})},onSearchError:function(a){this.seBodyEl.update('<p class="ui-search-empty">'+helpiq.i18.search.empty_text+"</p>")},beforeDestroy:function(){if(this.seBtn){Ext.destroy(this.seBtn)}if(this.seTxt){Ext.destroy(this.seTxt)}if(this.seBodyEl){Ext.destroy(this.seBodyEl)}helpiq.SearchPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("searchpanel",helpiq.SearchPanel);(function(){function a(b){var c=helpiq.app.getUserBar();if(!Ext.isEmpty(b)){c.fireEvent("search",b)}}window.search=a})();Ext.ns("helpiq");helpiq.MainTabPanel=Ext.extend(Ext.TabPanel,{topCount:15,linkWin:null,viewMenu:null,uType:"mainTab",pdfUpdated:false,searchPrefix:"hsearch/?q=",urlTracking:true,loadApi:helpiq.api.topic.getContent,initComponent:function(){this.items=[];this.initAuthComponent();this.viewMenu=new Ext.menu.Menu({items:[{text:helpiq.i18.topic.open_new_win,scope:this,cmd:"open_win",handler:this.openLink.createDelegate(this)},{text:helpiq.i18.topic.open_new_tab,cmd:"open_tab",handler:this.openLink.createDelegate(this)}]});helpiq.MainTabPanel.superclass.initComponent.call(this);this.addEvents("opentopic","openftopic","search","savepdf","saveall_pdf");var c=helpiq.project.getDisqusShortname();if(c!=null&&c!=""){var b=document,a=b.createElement("script");a.src="https://"+c+".disqus.com/embed.js";a.setAttribute("data-timestamp",+new Date());b.head.appendChild(a)}},disqus_rest:function(b,a){prjs_url=helpiq.project.getProjectAddress();b=prjs_url+b;a=prjs_url+a;setTimeout(function(){DISQUS.reset({reload:true,config:function(){this.page.identifier=b;this.page.url=a}})},3000)},afterRender:function(){helpiq.MainTabPanel.superclass.afterRender.call(this);var a=helpiq.app.getUserBar();this.relayEvents(a,["savepdf","saveall_pdf"]);this.initAuthEvents();this.loadButtons();this.on("opentopic",function(c,b){this.loadTab(b)},this);this.on("openftopic",function(c,b){this.openFolderTopic(b)},this);this.on("search",this.onSearch,this);this.on("tabchange",this.onTabChange,this);this.on("savepdf",this.savePdfFile,this);this.on("saveall_pdf",this.saveAllPdfFiles,this);this.body.on("click",this.clickHandler,this);this.body.on("contextmenu",this.onShowContextMenu,this);this.body.on("keypress",this.onKeyPress,this);this.addHistoryObserver();this.showStartTab();this.checkPageTools();if(!this.tip){this.addTip()}},openFolderTopic:function(a){helpiq.api.folder.getInfo(a.fid,a.title,{scope:this,success:function(c){var b={id:"ID"+c.topic_id,title:c.topic_title,permalink:c.topic_permalink};if(!a.editMode){this.fireEvent("opentopic",this,b)}else{b.editing=true;this.onEditTab(this,null,b)}}})},addTip:function(){var a={target:document.body,renderTo:document.body,delegate:"a.hq-tip",listeners:{scope:this,beforeshowtip:function(i){var d=i.triggerElement;if(d){var b=d.href,f,h,c,e,g=Ext.get(d),j=d.getAttribute("rel");if(g.hasClass("hq-text-tip")){if(g.hasClass("x-menu-item")){c=g.child(".x-menu-item-icon").dom.alt}else{c=g.dom.title}e="text"}else{if(!Ext.isEmpty(j)){b=j}if(-1!==b.indexOf("http://")){f="http://";b=b.replace("http://","")}if(-1!==b.indexOf("https://")){f="https://";b=b.replace("https://","")}if(f){h=b.indexOf("/");c=b.substring(h+1)}else{c=b}if(c&&Ext.util.Format.lowercase(c).startsWith("id=")){c=c.substring(3)}}this.tip.showTip(c,e)}}}};this.tip=new helpiq.ToolTip(a)},saveDocxFile:function(){var a=this.getActiveItem(),c=a.viewData,b;b=a.body.query("table");if(b.length>=50){helpiq.Msg.showWarning("pdf_failed")}else{helpiq.appMgr.showDownloadWindow({url:"/export/download_docx?topic_id="+c.topic_id,icon_cls:"icon-large-docx"})}},savePdfFile:function(){var a=this.getActiveItem(),c=a.viewData,b;b=a.body.query("table");if(b.length>=50){helpiq.Msg.showWarning("pdf_failed")}else{helpiq.appMgr.showDownloadWin({url:"/export/download_pdf?topic_id="+c.topic_id,icon_cls:"icon-large-pdf"})}},saveAllPdfFiles:function(){var a=helpiq.project.getProjectId();helpiq.appMgr.showDownloadWin({url:"/export/download_pdf?prj_id="+a,icon_cls:"icon-large-pdf"})},showStartTab:function(){this.loadDefaultTab();this.checkBrowserURL()},backToDefaultTab:function(a){this.remove(a)},addHistoryObserver:function(){helpiq.util.History.on("change",this.onHistoryChange,this)},onHistoryChange:function(c){c=decodeURIComponent(c);var a=helpiq.project.getLocalUrl(),b=helpiq.project.getProjectAddress();if(this.onBeforeProcessUrl(c)){this.processUrl(c,false)}this.urlTracking=true},onBeforeProcessUrl:function(a){return this.urlTracking},checkBrowserURL:function(){var a=helpiq.project.getKeyword();if(!Ext.isEmpty(a)){this.fireEvent("search",a);return}else{var b=helpiq.util.History.getCurrentUrl();if(false!==b){this.processUrl(b,true)}}},processUrl:function(e,f){var d=e.trim(),c,b=helpiq.project.getStartPage();if(e.indexOf("$")!=-1){c=d.right(d.length-d.indexOf("$")-1);d=d.left(d.indexOf("$"))}if(this.checkHash(d)){return false}if(!Ext.isEmpty(d)){if(d.startsWith(this.searchPrefix)){var a=d.substring(this.searchPrefix.length);a=a.replace(/-/gi," ");this.fireEvent("search",a);return}if(d==b){this.loadHomeTab();return}if(/^id[0-9]+/.test(d)){d=d.toUpperCase()}this.loadTab({id:d,bookmark:c});return}else{if(f){this.addHistory(b)}}},loadHomeTab:function(){this.setActiveTab(0)},loadButtons:Ext.emptyFn,appendToTabsMenu:function(b){var a=this.tabSwitcher.items.length;this.tabSwitcher.insert(a-2,{text:b.title,cls:"tab-switcher-btn",tabId:b.id,scope:this,group:"tabs",checked:false,handler:function(c){this.tabSwitcher.hide();this.setActiveTab(c.tabId)}})},onAdd:function(a){helpiq.MainTabPanel.superclass.onAdd.call(this,a);this.appendToTabsMenu(a)},onRemove:function(b){helpiq.MainTabPanel.superclass.onRemove.call(this,b);var a=this.getTabControlItem(b);if(a){this.tabSwitcher.remove(a)}},getTabControlItem:function(a){var b=this.tabSwitcher.items.find(function(c){return a.id==c.tabId},this);return b},refreshTabsController:function(a){var b=this.getTabControlItem(a);if(b){b.setText(a.title)}},onBeforeOpen:function(a){return true},selectActivePath:function(b){var c=this.activeTab,a=helpiq.app.getTocTree();if(b){a.selectPathById(b);return true}c=this.getComponent(c);if(c){a.selectPathById(c.panelId)}},closeAll:function(){this.items.each(function(a){if(a.closable){this.remove(a)}},this)},getPanelItem:function(id,permalink){var panel;var condition=null;if(/^ID[0-9]+/.test(id)){condition="(item.rendered && item.panelId == id) || (!item.rendered && item.viewData && item.viewData.permalink == permalink)"}else{if(permalink){condition="item.viewData ? ((!item.viewData.isSearch) && (item.viewData.permalink == permalink)) : false"}else{condition="item.viewData ? ((!item.viewData.isSearch) && (item.viewData.permalink == id)) : false"}}panel=this.items.find(function(item){return eval(condition)},this);if(!panel){panel=this.getComponent(id)}return panel},initItemConfig:function(a){a.hideMode="offsets";return a},loadDefaultTab:function(b){var a=b||{},c;var d=helpiq.project.getTopic();if(!(c=this.getPanelItem("ID"+d.id,d.permalink))){Ext.apply(a,{id:d.permalink,panelId:d.permalink,defaultTopic:true,autoScroll:true,iconCls:"icon-tab-home",cls:"ui-panel-wrap",viewData:{id:d.permalink,permalink:d.permalink},title:d.title,loadApi:a.loadApi?a.loadApi:this.loadApi});var c=new helpiq.TopicView(this.initItemConfig(a));this.addPanel(c)}return c},loadTab:function(d){var h=d.id;var b,f=d.bookmark,a={};var g=d.defaultTopic;if(!Ext.isDefined(g)){h+="";var c=helpiq.project.getTopic();g=c.id==h.replace("ID","")}if(!(b=this.getPanelItem(h,d.permalink))){if(d.notMask){a.notMask=d.notMask;delete d.notMask}Ext.apply(a,{title:d.title?d.title:helpiq.i18.basic.loading,closable:g?false:true,iconCls:g?"icon-tab-home":"",id:h,panelId:"ID"+h,autoScroll:true,editing:d.editing,viewData:d,permalink:d.permalink?d.permalink:h,bookmark:f,defaultTopic:g,loadApi:d.loadApi?d.loadApi:this.loadApi,broken_link:d.broken_link?d.broken_link:null});a=this.initItemConfig(a);b=new helpiq.TopicView(a);this.addPanel(b);this.setActiveTab(b)}else{if(d.forceEdit){Ext.apply(b,{editing:d.editing,loadApi:d.loadApi});var e=b.viewData||{};e.id=d.id;b.viewData=e}this.setActiveTab(b);if(f){b.scrollToBookmark(f)}this.toggleSearchField(b,!g)}return b},getSearchPage:function(){return this.getPanelItem(this.searchPrefix+"panel")},onSearch:function(a){var b=this.searchPrefix+"panel";var c=this.getPanelItem(b);if(!c){c=new helpiq.SearchPanel({id:b,panelId:b,keyword:a,closable:true,cls:"ui-panel-wrap",autoScroll:true});this.addPanel(c);this.setActiveTab(c)}else{this.setActiveTab(c);c.doSearch(a)}},showLinks:function(c){this.optionParams=c;var b=helpiq.i18.topic,a=this.getLinkWinCfg();this.linkForm=new Ext.FormPanel({border:false,labelAlign:"top",bodyCssClass:"ui-links-form",items:a[0]});this.linkWin=new Ext.Window({width:480,height:a[1],resizable:false,closeAction:"close",layout:"fit",shim:true,title:b.links_title,items:[this.linkForm]});this.linkWin.show(null,this.loadLinks,this)},getLinkWinCfg:function(){var b=helpiq.i18.topic;var a=[{xtype:"displayfield",hideLabel:true,value:b.links_text},{xtype:"textfield",anchor:"100%",fieldLabel:b.links_url,name:"url",selectOnFocus:true,readOnly:true},{xtype:"textfield",anchor:"100%",fieldLabel:b.links_permalink,name:"permalink",selectOnFocus:true,readOnly:true}];return[a,190]},loadLinks:function(){if(this.optionParams){var e=this.optionParams,c=this.linkForm.getForm(),a=helpiq.project.getProjectUrl(e.isSearch),b=c.findField("permalink");b[e.hidePermalink?"hide":"show"]();if(!e.isSearch){a+=helpiq.util.History.getPrefix();var d=e.topic_id?"ID"+e.topic_id:e.permalink;c.setValues({url:a+e.permalink,permalink:a+d})}else{c.setValues({url:a+"?search="+e.permalink,permalink:a+"?search="+e.permalink})}}},toggleSearchField:function(c){var b=helpiq.project.getHomeHideSearch();if(!b){return}if("topicview"==c){var e=c.panelId;e=e.replace("ID","");var a=helpiq.project.getTopic();c.defaultTopic=a.id==e}var d=helpiq.app.getSearchField();d[!c.defaultTopic?"show":"hide"]()},onTabChange:function(c,a){var e=this.getTabControlItem(a);if(e){e.setChecked(true)}if(a&&"topicview"==a.xtype){this.toggleSearchField(a)}else{this.toggleSearchField(a)}if(this.checkGlobalTabs(a)){return false}if(a){var f=a.pageTitle||a.title;if(Ext.isEmpty(f)){if(a.viewData&&a.viewData.title){f=a.viewData.title}else{f=""}}var d=a.isSearch?f:helpiq.appMgr.htmlTitle(f);var g=a.panelId,b=g.replace("ID","");if(a.viewData&&a.viewData.permalink){g=a.viewData.permalink;if(a.isSearch){g=this.searchPrefix+g;this.urlTracking=false}}if(a.viewData&&a.viewData.permalink){this.addHistory(g)}this.selectActivePath(b);if(!Ext.isEmpty(f)){Ext.getDoc().set({title:d})}helpiq.app.checkSupportTab(a,false)}},checkGlobalTabs:function(a){return false},checkHash:function(a){return false},onPrint:function(){Ext.ux.Printer.BaseRenderer.prototype.stylesheetPath=helpiq.project.getTopicCSSPath();Ext.ux.Printer.print(this.getActiveItem())},onFbshare:function(a){prjUrl=helpiq.project.getProjectUrl(a.isSearch);prjUrl+=helpiq.util.History.getPrefix();url=prjUrl+a.permalink;sharefb="http://www.facebook.com/share.php?"+url;window.open(sharefb,"Facebook share","width=600, height=500")},ontwshare:function(a){prjUrl=helpiq.project.getProjectUrl(a.isSearch);prjUrl+=helpiq.util.History.getPrefix();url=prjUrl+a.permalink;sharetw="http://twitter.com/home?status="+encodeURIComponent(url);window.open(sharetw,"Twitter share","width=600, height=500")},onglshare:function(a){prjUrl=helpiq.project.getProjectUrl(a.isSearch);prjUrl+=helpiq.util.History.getPrefix();url=prjUrl+a.permalink;sharegl="https://plus.google.com/share?url="+encodeURIComponent(url);window.open(sharegl,"Google share","width=600, height=500")},getActiveItem:function(){var a=this.getActiveTab();if(!Ext.isObject(a)){a=this.getItem(a)}return a},addPanel:function(a){this.add(a);return a},openLink:function(b){var d=b.parentMenu,c=d.linkParams;switch(b.cmd){case"open_win":var a=helpiq.project.getProjectAddress();a+=c.id;if(!Ext.isEmpty(c.mark)){a+="$"+c.mark}window.open(a);break;case"open_tab":this.fireEvent("opentopic",null,{id:c.id,bookmark:c.mark});break}},onKeyPress:function(b){var a=b.getTarget("input");a=Ext.fly(a);if(a&&b.getKey()==b.ENTER&&a.hasClass("searchInput")){window.search(a.getValue())}},clickHandler:function(b,a){this.onClick(b,a)},onClick:function(g,a){var f=this.getActiveItem();if(f&&"topicview"==f.xtype&&!f.editing){if(!a){a=g.getTarget("area")}if(a){var d=this.checkToggleContent(a,g,this.body);if(d){return false}}var b=g.getTarget("a[rel^=lightbox]");if(b){g.preventDefault();var c=Ext.ux.Lightbox.getMediaType(b.href);if("img"==c){Ext.ux.Lightbox.openImageLB(f.body,g,b)}else{var h=this.getUrlParams(g);if(h.lb){helpiq.appMgr.openLB(h);return false}}return false}var h=this.getUrlParams(g);if(h.lb){helpiq.appMgr.openLB(h);return false}if(!Ext.isEmpty(h.id)||!Ext.isEmpty(h.permalink)){this.fireEvent("opentopic",null,h);return false}if(!Ext.isEmpty(h.bookmark)){g.preventDefault();f.scrollToBookmark(h.bookmark);return false}b=g.getTarget("a[rel^=supportlightbox]");if(b){g.preventDefault();if(helpiq.TicketTab){helpiq.TicketTab.openTab(g)}return false}}},checkToggleContent:function(i,f,b){var g=f.getTarget("a.toggle-content"),j=false;if(g){f.stopEvent();j=true;var c=Ext.get(g),d=c.getAttribute("href"),a=d.replace("#","");a=Ext.DomQuery.selectNode("#"+b.id+" #"+a);if(a){a=Ext.get(a);var h=a.getStyle("display");h=h.toLowerCase();if("none"==h){a.slideIn("t",{scope:this,useDisplay:true,duration:0.125})}else{a.slideOut("t",{scope:this,useDisplay:true,duration:0.125})}}}return j},onShowContextMenu:function(b){var a=this.getActiveItem();if("topicview"==a.xtype){var d=this.getUrlParams(b);if(!d.lb&&(!Ext.isEmpty(d.mark)||!Ext.isEmpty(d.id))){if(Ext.isEmpty(d.id)){d.id=a.params.id}var c=this.viewMenu;c.linkParams=d;c.showAt(b.getXY())}}},getUrlParams:function(j){var s=j.getTarget("a"),g={mark:"",id:""};if(!s){s=j.getTarget("area")}if(s){var b=null,k=null,i=null;Ext.each(s.attributes,function(e){if("href"==e.nodeName){b=e.nodeValue}if("target"==e.nodeName){k=e.nodeValue}if("hqid"==e.nodeName){i=e.nodeValue}},this);k=Ext.util.Format.lowercase(k);if("_blank"==k){return g}var l=Ext.get(s);if(l.hasClass("hq-lightbox")||"lightbox"==s.getAttribute("rel")){j.stopEvent();var h=Ext.util.Format.lowercase(b);if("#"==b.left(1)){var d=b.replace("#","");var n=d.indexOf("&");if(-1!=n){g=Ext.urlDecode(d.substring(n));d=d.substring(0,n)}if(d.indexOf("$")!=-1){g.anchor=d.substring(d.indexOf("$")+1);g.id=d.substring(0,d.indexOf("$"))}else{g.id=d}}else{var d=-1!==b.indexOf("?")?b.substring(0,b.indexOf("?")):(-1!==b.indexOf("&")?b.substring(0,b.indexOf("&")):b);g=Ext.urlDecode(b);if(d.indexOf("$")!=-1){g.anchor=d.substring(d.indexOf("$")+1);g.id=d.substring(0,d.indexOf("$"))}else{g.id=d}}g.lb=true;return g}var c=b,r=helpiq.project.getProjectAddress();b=helpiq.appMgr.getClearUrl(b);if(Ext.isEmpty(b)){return g}if(Ext.get(s).hasClass("hq-tip")){j.stopEvent()}if(!Ext.isEmpty(i)){j.stopEvent();g.id="ID"+i}if("#"==b.left(1)){var d=b.replace("#",""),f;d=d.replaceAll("%20"," ");f=d;if(!Ext.isEmpty(d)){j.stopEvent();g.bookmark=f;if(d.indexOf("$")!=-1){a=d.right(d.length-d.indexOf("$")-1);d=d.left(d.indexOf("$"));g.bookmark=a;d=d.toLowerCase();if(/^id[0-9]+/.test(d)){g.id=d.replace("id","ID")}else{g.id=d}}if(-1!=c.indexOf(r)){g.id=d;g.bookmark=null}return g}}if(Ext.isEmpty(i)){if("/"==b.left(1)){var d=b.substring(1),a,o=helpiq.util.History.getCurrentUrl();if(o.indexOf("$")!=-1){o=o.left(o.indexOf("$"))}if(d.indexOf("$")!=-1){a=b.right(b.length-b.indexOf("$")-1);d=d.left(d.indexOf("$"))}if(d==o){g.bookmark=a}}}else{if("/"==b.left(1)){var d=b.substring(1);if(d.indexOf("$")!=-1){var a=b.right(b.length-b.indexOf("$")-1);g.bookmark=a;d=d.left(d.indexOf("$"))}g.permalink=d}}}return g},refreshPageTools:function(d){var h=helpiq.app.getUserBar(),c=helpiq.app.getToolsBar(),b=c.items.item(h.pageToolId),f,e=helpiq.project.tbar,a=e.visible;if(b){b.menu.items.each(function(g){switch(g.actionIndex){case"save_pdf":f=d?false:a.one;g[f?"show":"hide"]();break;case"save_all_pdf":f=a.all;g[f?"show":"hide"]();break;case"printpage":g[d?"hide":"show"]();break;case"save_doc":g[d?"hide":"show"]();break}})}if(!this.pdfUpdated){this.updatePageTools(helpiq.project.tbar.text);this.pdfUpdated=true}},updatePageTools:function(c){var e=helpiq.app.getUserBar(),b=helpiq.app.getToolsBar(),a=b.items.item(e.pageToolId),d;if(a){a.menu.items.each(function(f){switch(f.actionIndex){case"save_pdf":d=c.one;if(!Ext.isEmpty(d)){f.setText(d)}break;case"save_all_pdf":d=c.all;if(!Ext.isEmpty(d)){f.setText(d)}break}})}},checkPageTools:function(){this.refreshPageTools(false)},addHistory:function(a){helpiq.util.History.add(a)},initAuthEvents:Ext.emptyFn,initAuthComponent:Ext.emptyFn,refreshButtons:Ext.emptyFn,initViewButtons:Ext.emptyFn,authDestroy:Ext.emptyFn,removeOldItems:Ext.emptyFn,beforeDestroy:function(){if(this.tabSwitcher){Ext.destroy(this.tabSwitcher)}if(this.linkForm){Ext.destroy(this.linkForm)}if(this.linkWin){Ext.destroy(this.linkWin)}this.authDestroy();helpiq.MainTabPanel.superclass.beforeDestroy.apply(this)}});Ext.ns("helpiq");helpiq.MainContainer=Ext.extend(helpiq.MainTabPanel,{cls:"ui-basic-container",uType:"mainCt",initItemConfig:function(a){a.border=false;a.hideMode="offsets";delete a.title;return a},afterRender:function(){helpiq.MainContainer.superclass.afterRender.call(this);this.bwrap.addClass("x-tab-panel-body")},addPanel:function(a){this.items.each(function(c){this.remove(c)},this);this.doLayout();var b=helpiq.MainContainer.superclass.addPanel.call(this,a);this.setActiveTab(b)},showStartTab:function(){this.checkBrowserURL()},backToDefaultTab:function(){panel=this.loadDefaultTab();this.setActiveTab(panel)},loadHomeTab:function(){var a=this.loadDefaultTab();this.setActiveTab(a)},setActiveTab:function(a){if(a){helpiq.MainContainer.superclass.setActiveTab.call(this,a)}},checkGlobalTabs:function(a){if(!a){return false}return helpiq.MainContainer.superclass.checkGlobalTabs.call(this,a)},getTabControlItem:Ext.emptyFn});Ext.ns("helpiq");helpiq.ApplicationManager=Ext.extend(Object,{cookieProvider:null,downloadWin:null,tranTextId:"helpiq-tran-text-9999",init:function(){var b=helpiq.project.getShortProjectUrl();var c="/",a=b.lastIndexOf("/");if(-1!=a){c=b.substring(a);b=b.substring(0,a)}this.cookieProvider=new Ext.state.CookieProvider({path:c,expires:new Date(new Date().getTime()+(1000*60*60*24*30)),domain:b})},getMethodName:function(b,e){var d=b.split(e),f="",a=Ext.util.Format;for(var c=0;c<d.length;c++){f+=a.capitalize(d[c])}return f},showDownloadWin:function(a){var b=a.title||helpiq.i18.basic.download_pdf;this.win=new Ext.Window({cls:"ui-download-win",title:b,width:220,minWidth:220,height:140,minHeight:140,modal:true,layout:"fit",closeAction:"close",items:[{border:false,tpl:new Ext.XTemplate('<div class="ui-download-win-body">','<div class="ui-download-icon {icon}">','<a target="_blank" href="{url}">{title}</a>',"</div>","</div>"),data:{url:a.url,icon:a.icon_cls,title:b}}],listeners:{afterrender:function(d){var c=this.body.select(".ui-download-icon a");this.mon(c,"click",function(){this.close()},this)}},buttons:[{text:helpiq.i18.basic.close,scope:this,handler:function(){this.win.close()}}]});this.win.show()},showDownloadWindow:function(a){var b=a.title||helpiq.i18.basic.download_docx;this.win=new Ext.Window({cls:"ui-download-win",title:b,width:220,minWidth:220,height:140,minHeight:140,modal:true,layout:"fit",closeAction:"close",items:[{border:false,tpl:new Ext.XTemplate('<div class="ui-download-win-body">','<div class="ui-download-icon {icon}">','<a target="_blank" href="{url}">{title}</a>',"</div>","</div>"),data:{url:a.url,icon:a.icon_cls,title:b}}],listeners:{afterrender:function(d){var c=this.body.select(".ui-download-icon a");this.mon(c,"click",function(){this.close()},this)}},buttons:[{text:helpiq.i18.basic.close,scope:this,handler:function(){this.win.close()}}]});this.win.show()},addSearchField:function(b,j,l,i,a,c,f){var h=c?[]:["->"];if(j){h.push(j)}var k=function(m){this.store.setBaseParam("keyword",m);this.store.load()};if(i){k=i}if(!a){a="query"}var g={};g.scope=l||this;g[a]=function(n,m){k.call(l||this,m)};var e={width:240,listeners:g},d=null;if(f){e.width=200;d=new helpiq.SearchSuggestion(e)}else{d=new helpiq.SearchField(e)}h.push(d);b.add(h);return d},addStyle:function(b,c){var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("href",b);if(c){a.setAttribute("ctype",c)}document.getElementsByTagName("head")[0].appendChild(a)},getCookieValue:function(a){return this.cookieProvider.get(a)},setCookieValue:function(a,b){this.cookieProvider.set(a,b)},getClearUrl:function(b){b=b||"";var a=helpiq.project.getProjectAddress(),c="";if(("http://"==b.left(7)||"https://"==b.left(8))&&0!=b.indexOf(a)){return c}c=b.replace(a,"");return c},openLB:function(a){var b=helpiq.DISPATCH_URL;if(a.url){b+=a.url}else{var e=helpiq.project.getActiveProjectAddress();e=e.replace("http://","");e="http"+(a.ssl?"s":"")+"://"+e;b+="lb-content/?project="+e+"&topic_id="+a.id}var c=a.bg||false;width=a.width||700,height=a.height||500,anchor=a.anchor||"",params=a.params||{};params=helpiq.util.Scripts.addScriptIndexs(params);params=helpiq.applyBaseParams(params);params=Ext.urlEncode(params);b+="&ref=app&bg="+c+"&width="+width+"&height="+height+"&anchor="+anchor+"&"+params;var d=function(i,j,g){var h=helpiq.TopicView.prototype;if(g&&g.plugins&&!Ext.isEmpty(g.plugins)){var f;Ext.each(g.plugins,function(k){f="render"+Ext.util.Format.capitalize(k);if(h[f]){h[f].call(this,g,Ext.ux.Lightbox.getContentEl())}},this)}};Ext.ux.Lightbox.open(b,null,null,d,this)},htmlText:function(c){if(!Ext.get(this.tranTextId)){Ext.getBody().createChild({tag:"div",style:"display:none",id:this.tranTextId})}var a=Ext.get(this.tranTextId),b;a.update(c);b=a.dom.innerHTML;a.update("");b=Ext.util.Format.htmlDecode(b);return b},htmlTitle:function(a){return this.htmlText(a)}});Ext.ns("helpiq");helpiq.Application=Ext.extend(Ext.util.Observable,{mainTab:null,userbar:null,navigator:null,rendered:false,init:function(){var a=Ext.get("loading").child(".loading-indicator img"),b=helpiq.ICON_LOAD;helpiq.ICON_LOAD=a.getAttribute("src");helpiq.BLANK_IMAGE_URL=helpiq.ICON_LOAD.replace("loading32.gif","s.gif");helpiq.LOAD_HTML=helpiq.LOAD_HTML.replace(b,helpiq.ICON_LOAD);Ext.BLANK_IMAGE_URL=helpiq.BLANK_IMAGE_URL;Ext.QuickTips.init();helpiq.util.History.init()},start:function(){helpiq.user.checkSession({scope:this,success:function(a){helpiq.user.load({scope:this,success:function(b){this.run()}})}})},run:function(){this.init();this.buildMainUI();this.hideMask.defer(250);this.rendered=true},buildMainUI:function(){var d=helpiq.project,g,c,b,f=!d.getTocVisible()&&!d.getIndexVisible(),e=helpiq.project.getDefaultView(),a="tab"==e?"MainTabPanel":"MainContainer";b={id:"helpiq-header",cls:"ui-site-header",border:false,region:"north"};g={minSize:190,maxSize:500,tabPosition:"bottom",split:true,header:false,animCollapse:false,animate:false,collapseMode:"mini",useSplitTips:true,region:"west",margins:"0 0 5 5",cls:"x-panel ui-side-nav"};c={region:"center",activeTab:0,minTabWidth:147,tabWidth:147,enableTabScroll:true,id:"ui-main-tab",border:true,margins:f?"0 5 5 5":"0 5 5 0"};Ext.getBody().addClass("new-toc");if(HELPIQ.newToc){Ext.apply(g,{split:true,margins:"0 0 0 0"});Ext.apply(c,{margins:"0 0 0 0",border:false});if(HELPIQ.show_book_icon==1){setTimeout(function(){Ext.get("helpiq-header").next().addClass("ui-sidenav-bookstyl").removeClass("ui-sidenav-nopage").removeClass("ui-sidenav-nofolder")},50)}if(HELPIQ.show_page_icon==2){setTimeout(function(){Ext.get("helpiq-header").next().addClass("ui-sidenav-folderstyl_plus").removeClass("ui-sidenav-nopage").removeClass("ui-sidenav-nofolder").removeClass("ui-sidenav-bookstyl")},50)}if(HELPIQ.show_page_icon==3){setTimeout(function(){Ext.get("helpiq-header").next().addClass("ui-sidenav-folderstyl_arrow").removeClass("ui-sidenav-nopage").removeClass("ui-sidenav-nofolder").removeClass("ui-sidenav-bookstyl")},50)}if(HELPIQ.show_page_icon==0&&HELPIQ.show_book_icon==0){setTimeout(function(){Ext.get("helpiq-header").next().addClass("ui-sidenav-nopage").addClass("ui-sidenav-nofolder").removeClass("ui-sidenav-bookstyl")},50)}}if(d.getExtraHeaderHtml){b.margins="35 0 0 0"}this.userbar=new helpiq.UserBar(b);this.navigator=new helpiq.Navigator(g);this.mainTab=new helpiq[a](c);this.viewport=new Ext.Viewport({layout:"border",items:[this.userbar,this.navigator,this.mainTab]});if(!HELPIQ.newToc){Ext.getBody().removeClass("new-toc")}this.mainTab.relayEvents(this.navigator,["opentopic","openftopic"]);this.mainTab.relayEvents(this.userbar,["search"])},getNavigator:function(){return this.navigator},getTocTree:function(){return this.navigator.docTree},getIndexList:function(){return this.navigator.docList},getMainTab:function(){return this.mainTab},getUserBar:function(){return this.userbar},getSearchField:function(){return this.userbar.seField},initTranslate:function(){if(helpiq.app.userbar){helpiq.app.userbar.initTranslate()}},getToolsBar:function(){return this.userbar.getBottomToolbar()},hideMask:function(){if(Ext.get("loading")){Ext.get("loading").remove();Ext.get("loading-mask").remove()}},getViewport:function(){return this.viewport},refreshLayout:function(){this.viewport.doLayout()},checkSupportTab:function(b,a){if(helpiq.TicketTab){b=b||this.mainTab.getActiveItem();helpiq.TicketTab.checkTabPosition(b,a)}}});helpiq.appMgr=new helpiq.ApplicationManager();helpiq.user=new helpiq.User();helpiq.project=new helpiq.Project();helpiq.app=new helpiq.Application();Ext.onReady(helpiq.app.start,helpiq.app);